import { h, _ as _extends, L as List, a as ListItem, p, M, m, s } from './index-cd67f2b7.js';

const style = {
  padding: 8,
  marginLeft: 16,
  marginRight: 16,
  marginTop: 8,
  marginBottom: 8,
  boxSizing: 'border-box',
  flex: 1
};
function TextInput(props) {
  const {
    id,
    type = 'text'
  } = props;
  return h("div", {
    style: {
      display: 'flex',
      width: '100%'
    }
  }, h("input", _extends({
    style: style
  }, props, {
    "data-testid": id,
    type: type
  })));
}

function Hangout({
  hangouts,
  onSearch,
  onSelect
}) {
  return h("div", null, h(TextInput, {
    type: "search",
    onChange: onSearch
  }), h(List, null, hangouts && hangouts.map(g => {
    debugger;
    return h(ListItem, {
      onClick: onSelect
    }, g.username);
  })));
}

const actionTypes = {
  SET_SOCKET: 'SET_SOCKET',
  LOAD_HANGOUTS: 'LOAD_HANGOUTS',
  LOAD_MESSAGES: 'LOAD_MESSAGES',
  FILTER_HANGOUT: 'FILTER_HANGOUT',
  SELECTED_HANGOUT: 'SELECTED_HANGOUT',
  FETCH_STARTED: 'FETCH_STARTED',
  FETCH_SUCCESS: 'FETCH_SUCCESS',
  FETCH_FAILED: 'FETCH_FAILED',
  ONLINE_STATE_CHANGED: 'ONLINE_STATE_CHANGED',
  OFFER_STARTED: 'OFFER_STARTED',
  OFFER_SUCCESS: 'OFFER_SUCCESS',
  OFFER_FAILED: 'OFFER_FAILED',
  ACCEPT_STARTED: 'ACCEPT_STARTED',
  ACCEPT_SUCCESS: 'ACCEPT_SUCCESS',
  ACCEPT_FAILED: 'ACCEPT_FAILED',
  BLOCK_STARTED: 'BLOCK_STARTED',
  BLOCK_SUCCESS: 'BLOCK_SUCCESS',
  BLOCK_FAILED: 'BLOCK_FAILED',
  UNBLOCK_STARTED: 'UNBLOCK_STARTED',
  UNBLOCK_SUCCESS: 'UNBLOCK_SUCCESS',
  UNBLOCK_FAILED: 'UNBLOCK_FAILED',
  MESSAGE_STARTED: 'MESSAGE_STARTED',
  MESSAGE_SUCCESS: 'MESSAGE_SUCCESS',
  MESSAGE_FAILED: 'MESSAGE_FAILED',
  DECLINE_STARTED: 'DECLINE_STARTED',
  DECLINE_SUCCESS: 'DECLINE_SUCCESS',
  DECLINE_FAILED: 'DECLINE_FAILED',
  HANGOUT_CHANGED_ITS_STATE: 'HANGOUT_CHANGED_ITS_STATE',
  OFFERER_RECIEVED: 'OFFERER_RECIEVED',
  ACKNOWLEDGEMENT_RECIEVED: 'ACKNOWLEDGEMENT_RECIEVED' //   HANGOUT_STATE_UPDATED:'HANGOUT_STATE_UPDATED'
  // BLOCKER_RECIEVED: 'BLOCKER_RECIEVED',
  // ACCEPTER_RECIEVED: 'ACCEPTER_RECIEVED',
  // UNBLOCKER_RECIEVED: 'UNBLOCKER_RECIEVED',
  // DECLINER_RECIEVED: 'DECLINER_RECIEVED',
  // MESSANGER_RECIVED: 'MESSANGER_RECIVED'

};

const initState = {
  hangouts: [],
  hangout: null,
  socket: null,
  messages: []
};
function reducer(state, action) {
  switch (action.type) {
    case actionTypes.SET_SOCKET:
      return { ...state,
        socket: action.socket
      };

    case actionTypes.SELECTED_HANGOUT:
      return { ...state,
        hangout: state.hangouts.find(g => g.username === action.username)
      };

    case actionTypes.HANGOUT_CHANGED_ITS_STATE:
    case actionTypes.ACKNOWLEDGEMENT_RECIEVED:
      return { ...state,
        hangouts: state.hangouts.map(g => {
          if (g.username === action.hangout.username) {
            return action.hangout;
          } else return g;
        })
      };

    case actionTypes.OFFERER_RECIEVED:
      return { ...state,
        hangouts: [...state.hangouts, action.hangout]
      };

    default:
      return state;
  }
}

const messagesFromServer = {
  BLOCKER: 'BLOCKER',
  ACCEPTER: 'ACCEPTER',
  UNBLOCKER: 'UNBLOCKER',
  OFFERER: 'OFFERER',
  DECLINER: 'DECLINER',
  MESSANGER: 'MESSANGER'
};

const messageCategories = {
  ACKNOWLEDGEMENT: 'ACKNOWLEDGEMENT',
  PEER: 'PEER'
};

function initWSocket({
  url,
  dispatch
}) {
  dispatch({
    type: actionTypes.SET_SOCKET,
    socket: new WebSocket(url)
  });
}

function messageToHangout({
  message,
  hangout
}) {
  return { ...hangout,
    state: message.type,
    message: message
  };
}
function messageToNewHangout(msg) {
  const {
    username,
    email,
    type,
    message
  } = msg;
  const hangout = {
    username,
    state: type,
    email,
    message
  };
  return hangout;
}

function useSocket({
  socket,
  dispatch,
  hangout
}) {
  p(() => {
    if (socket) {
      socket.onmessage = message => {
        const msg = JSON.parse(message.data);

        switch (msg.category) {
          case messageCategories.ACKNOWLEDGEMENT:
            handleAckhowledgements({
              dispatch,
              msg,
              hangout
            });

          case messageCategories.PEER:
            handlePeerMessages({
              dispatch,
              msg,
              hangout
            });

          default:
            throw new Error('Message cateory is not defined');
        }
      };

      socket.onclose = () => {};

      socket.onerror = error => {};
    }
  }, [socket]);
  return null;
}

function handleAckhowledgements({
  dispatch,
  msg,
  hangout
}) {
  let updatedHangout = messageToHangout({
    hangout,
    message: msg
  });
  dispatch({
    type: actionTypes.ACKNOWLEDGEMENT_RECIEVED,
    hangout: updatedHangout
  });
  updateHangoutStateInLocalStorage(`${username}-hangouts`, updatedHangout);
}

function handlePeerMessages({
  dispatch,
  msg,
  hangout
}) {
  let updatedHangout = messageToHangout({
    hangout,
    message: msg
  });
  let newHangout = messageToNewHangout(msg);

  switch (msg.type) {
    case messagesFromServer.BLOCKER:
    case messagesFromServer.DECLINER:
    case messagesFromServer.MESSANGER:
    case messagesFromServer.UNBLOCKER:
    case messagesFromServer.ACCEPTER:
      dispatch({
        type: actionTypes.HANGOUT_CHANGED_ITS_STATE,
        hangout: updatedHangout
      });
      updateHangoutStateInLocalStorage(`${username}-hangouts`, updatedHangout);

    case messagesFromServer.OFFERER:
      dispatch({
        type: actionTypes.HANGOUT_CHANGED_ITS_STATE,
        hangout: newHangout
      });
      addNewHangoutToLocalStorage(`${username}-hangouts`, updatedHangout);

    default:
      throw new Error('Message type for messagesFromServer is not defined');
  }
}

function updateHangoutStateInLocalStorage(key, hangout) {
  const hangouts = localStorage.getItem(key);
  const updated = hangouts.map(g => {
    if (g.username === hangout.username) {
      return hangout;
    } else {
      return g;
    }
  });
  localStorage.setItem(key, JSON.stringify(updated));
}

function addNewHangoutToLocalStorage(key, hangout) {
  const hangouts = localStorage.getItem(key);
  const inserted = hangouts.push(hangout);
  localStorage.setItem(key, JSON.stringify(inserted));
}

const HangoutContext = M();
function HangoutsProvider(props) {
  const {
    socketUrl
  } = props;
  const [state, dispatch] = m(reducer, initState);
  const {
    socket,
    hangout
  } = state;
  const sockethandler = useSocket({
    dispatch,
    socket,
    hangout
  });
  p(() => {
    initWSocket({
      url: socketUrl,
      dispatch
    });
  }, []);
  const value = s(() => [state, dispatch], [state]);
  return h(HangoutContext.Provider, _extends({
    value: value
  }, props));
}

function index () {
  return h(HangoutsProvider, {
    socketUrl: "ws://localhost:3000/hangouts"
  }, h(Hangout, null));
}

export default index;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgtYTM1Zjg2YjcuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9sYXlvdXQvVGV4dElucHV0LmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL0hhbmdvdXQuanMiLCIuLi8uLi8uLi9jbGllbnQvaGFuZ291dHMvc3RhdGUvYWN0aW9uVHlwZXMuanMiLCIuLi8uLi8uLi9jbGllbnQvaGFuZ291dHMvc3RhdGUvcmVkdWNlci5qcyIsIi4uLy4uLy4uL2NsaWVudC9oYW5nb3V0cy9zdGF0ZS9tZXNzYWdlVHlwZXMuanMiLCIuLi8uLi8uLi9jbGllbnQvaGFuZ291dHMvc3RhdGUvYWN0aW9ucy5qcyIsIi4uLy4uLy4uL2NsaWVudC9oYW5nb3V0cy9zdGF0ZS9tZXNzYWdlQ29udmVydGVyLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL3N0YXRlL3VzZVNvY2tldC5qcyIsIi4uLy4uLy4uL2NsaWVudC9oYW5nb3V0cy9zdGF0ZS9IYW5nb3V0c1Byb3ZpZGVyLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xyXG5cclxuY29uc3Qgc3R5bGUgPSB7XHJcbiAgcGFkZGluZzogOCxcclxuICBtYXJnaW5MZWZ0OiAxNixcclxuICBtYXJnaW5SaWdodDogMTYsXHJcbiAgbWFyZ2luVG9wOiA4LFxyXG4gIG1hcmdpbkJvdHRvbTogOCxcclxuICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcclxuICBmbGV4OiAxLFxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRleHRJbnB1dChwcm9wcykge1xyXG4gIGNvbnN0IHsgaWQsIHR5cGUgPSAndGV4dCcgfSA9IHByb3BzO1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4Jywgd2lkdGg6ICcxMDAlJyB9fT5cclxuICAgICAgPGlucHV0IHN0eWxlPXtzdHlsZX0gey4uLnByb3BzfSBkYXRhLXRlc3RpZD17aWR9IHR5cGU9e3R5cGV9IC8+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiIsImltcG9ydCB7aH0gZnJvbSAncHJlYWN0J1xyXG5pbXBvcnQge0xpc3QsTGlzdEl0ZW19IGZyb20gJy4uL2xheW91dC9OYXZMaXN0J1xyXG5pbXBvcnQge1RleHRJbnB1dH0gZnJvbSAnLi4vbGF5b3V0L1RleHRJbnB1dCdcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSGFuZ291dCh7aGFuZ291dHMsIG9uU2VhcmNoLG9uU2VsZWN0fSl7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgICA8VGV4dElucHV0IHR5cGU9XCJzZWFyY2hcIiBvbkNoYW5nZT17b25TZWFyY2h9Lz5cclxuICAgICAgICA8TGlzdD5cclxuICAgICAgICAgICAge2hhbmdvdXRzICYmIGhhbmdvdXRzLm1hcChnPT57XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8TGlzdEl0ZW0gb25DbGljaz17b25TZWxlY3R9PntnLnVzZXJuYW1lfTwvTGlzdEl0ZW0+XHJcbiAgICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvTGlzdD5cclxuICAgIDwvZGl2PlxyXG59IiwiZXhwb3J0IGNvbnN0IGFjdGlvblR5cGVzID0ge1xyXG4gICAgU0VUX1NPQ0tFVDogJ1NFVF9TT0NLRVQnLFxyXG4gICAgTE9BRF9IQU5HT1VUUzogJ0xPQURfSEFOR09VVFMnLFxyXG4gICAgTE9BRF9NRVNTQUdFUzogJ0xPQURfTUVTU0FHRVMnLFxyXG4gICAgRklMVEVSX0hBTkdPVVQ6ICdGSUxURVJfSEFOR09VVCcsXHJcbiAgICBTRUxFQ1RFRF9IQU5HT1VUOiAnU0VMRUNURURfSEFOR09VVCcsXHJcbiAgXHJcblxyXG5cclxuICAgIEZFVENIX1NUQVJURUQ6ICdGRVRDSF9TVEFSVEVEJyxcclxuICAgIEZFVENIX1NVQ0NFU1M6ICdGRVRDSF9TVUNDRVNTJyxcclxuICAgIEZFVENIX0ZBSUxFRDogJ0ZFVENIX0ZBSUxFRCcsXHJcblxyXG4gICAgT05MSU5FX1NUQVRFX0NIQU5HRUQ6ICdPTkxJTkVfU1RBVEVfQ0hBTkdFRCcsXHJcblxyXG5cclxuICAgIE9GRkVSX1NUQVJURUQ6ICdPRkZFUl9TVEFSVEVEJyxcclxuICAgIE9GRkVSX1NVQ0NFU1M6ICdPRkZFUl9TVUNDRVNTJyxcclxuICAgIE9GRkVSX0ZBSUxFRDogJ09GRkVSX0ZBSUxFRCcsXHJcblxyXG4gICAgQUNDRVBUX1NUQVJURUQ6ICdBQ0NFUFRfU1RBUlRFRCcsXHJcbiAgICBBQ0NFUFRfU1VDQ0VTUzogJ0FDQ0VQVF9TVUNDRVNTJyxcclxuICAgIEFDQ0VQVF9GQUlMRUQ6ICdBQ0NFUFRfRkFJTEVEJyxcclxuXHJcbiAgICBCTE9DS19TVEFSVEVEOiAnQkxPQ0tfU1RBUlRFRCcsXHJcbiAgICBCTE9DS19TVUNDRVNTOiAnQkxPQ0tfU1VDQ0VTUycsXHJcbiAgICBCTE9DS19GQUlMRUQ6ICdCTE9DS19GQUlMRUQnLFxyXG5cclxuICAgIFVOQkxPQ0tfU1RBUlRFRDogJ1VOQkxPQ0tfU1RBUlRFRCcsXHJcbiAgICBVTkJMT0NLX1NVQ0NFU1M6ICdVTkJMT0NLX1NVQ0NFU1MnLFxyXG4gICAgVU5CTE9DS19GQUlMRUQ6ICdVTkJMT0NLX0ZBSUxFRCcsXHJcblxyXG4gICAgTUVTU0FHRV9TVEFSVEVEOiAnTUVTU0FHRV9TVEFSVEVEJyxcclxuICAgIE1FU1NBR0VfU1VDQ0VTUzogJ01FU1NBR0VfU1VDQ0VTUycsXHJcbiAgICBNRVNTQUdFX0ZBSUxFRDogJ01FU1NBR0VfRkFJTEVEJyxcclxuXHJcbiAgICBERUNMSU5FX1NUQVJURUQ6J0RFQ0xJTkVfU1RBUlRFRCcsXHJcbiAgICBERUNMSU5FX1NVQ0NFU1M6J0RFQ0xJTkVfU1VDQ0VTUycsXHJcbiAgICBERUNMSU5FX0ZBSUxFRDonREVDTElORV9GQUlMRUQnLFxyXG5cclxuICAgIEhBTkdPVVRfQ0hBTkdFRF9JVFNfU1RBVEU6ICdIQU5HT1VUX0NIQU5HRURfSVRTX1NUQVRFJyxcclxuICAgIE9GRkVSRVJfUkVDSUVWRUQ6ICdPRkZFUkVSX1JFQ0lFVkVEJyxcclxuICAgIEFDS05PV0xFREdFTUVOVF9SRUNJRVZFRDonQUNLTk9XTEVER0VNRU5UX1JFQ0lFVkVEJ1xyXG5cclxuIC8vICAgSEFOR09VVF9TVEFURV9VUERBVEVEOidIQU5HT1VUX1NUQVRFX1VQREFURUQnXHJcbiAgICAvLyBCTE9DS0VSX1JFQ0lFVkVEOiAnQkxPQ0tFUl9SRUNJRVZFRCcsXHJcbiAgICAvLyBBQ0NFUFRFUl9SRUNJRVZFRDogJ0FDQ0VQVEVSX1JFQ0lFVkVEJyxcclxuICAgIC8vIFVOQkxPQ0tFUl9SRUNJRVZFRDogJ1VOQkxPQ0tFUl9SRUNJRVZFRCcsXHJcbiAgIFxyXG4gICAgLy8gREVDTElORVJfUkVDSUVWRUQ6ICdERUNMSU5FUl9SRUNJRVZFRCcsXHJcbiAgICAvLyBNRVNTQU5HRVJfUkVDSVZFRDogJ01FU1NBTkdFUl9SRUNJVkVEJ1xyXG59IiwiaW1wb3J0IHsgYWN0aW9uVHlwZXMgfSBmcm9tICcuL2FjdGlvblR5cGVzJ1xyXG5leHBvcnQgY29uc3QgaW5pdFN0YXRlID0ge1xyXG4gICAgaGFuZ291dHM6IFtdLFxyXG4gICAgaGFuZ291dDogbnVsbCxcclxuICAgIHNvY2tldDogbnVsbCxcclxuICAgIG1lc3NhZ2VzOiBbXVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7XHJcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBhY3Rpb25UeXBlcy5TRVRfU09DS0VUOlxyXG4gICAgICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgc29ja2V0OiBhY3Rpb24uc29ja2V0IH1cclxuICAgICAgICBjYXNlIGFjdGlvblR5cGVzLlNFTEVDVEVEX0hBTkdPVVQ6XHJcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBoYW5nb3V0OiBzdGF0ZS5oYW5nb3V0cy5maW5kKGcgPT4gZy51c2VybmFtZSA9PT0gYWN0aW9uLnVzZXJuYW1lKSB9XHJcbiAgICAgICAgY2FzZSBhY3Rpb25UeXBlcy5IQU5HT1VUX0NIQU5HRURfSVRTX1NUQVRFOlxyXG4gICAgICAgIGNhc2UgYWN0aW9uVHlwZXMuQUNLTk9XTEVER0VNRU5UX1JFQ0lFVkVEOlxyXG4gICAgICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgaGFuZ291dHM6IHN0YXRlLmhhbmdvdXRzLm1hcChnID0+IHsgaWYgKGcudXNlcm5hbWUgPT09IGFjdGlvbi5oYW5nb3V0LnVzZXJuYW1lKSB7IHJldHVybiBhY3Rpb24uaGFuZ291dCB9IGVsc2UgcmV0dXJuIGcgfSkgfVxyXG4gICAgICAgIGNhc2UgYWN0aW9uVHlwZXMuT0ZGRVJFUl9SRUNJRVZFRDpcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGhhbmdvdXRzOiBbLi4uc3RhdGUuaGFuZ291dHMsIGFjdGlvbi5oYW5nb3V0XSB9XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY29uc3QgYWNrbm93bGVkZ21lbnRUeXBlcyA9IHtcclxuICAgIE9GRkVSRUQ6ICdPRkZFUkVEJyxcclxuICAgIEFDQ0VQVEVEOiAnQUNDRVBURUQnLFxyXG4gICAgQkxPQ0tFRDogJ0JMT0NLRUQnLFxyXG4gICAgVU5CTE9DS0VEOiAnVU5CTE9DS0VEJyxcclxuICAgIERFQ0xJTkVEOiAnREVDTElORUQnLFxyXG4gICAgTUVTU0FHRUQ6ICdNRVNTQUdFRCdcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBtZXNzYWdlc0Zyb21TZXJ2ZXIgPSB7XHJcbiAgICBCTE9DS0VSOiAnQkxPQ0tFUicsXHJcbiAgICBBQ0NFUFRFUjogJ0FDQ0VQVEVSJyxcclxuICAgIFVOQkxPQ0tFUjogJ1VOQkxPQ0tFUicsXHJcbiAgICBPRkZFUkVSOiAnT0ZGRVJFUicsXHJcbiAgICBERUNMSU5FUjogJ0RFQ0xJTkVSJyxcclxuICAgIE1FU1NBTkdFUjogJ01FU1NBTkdFUidcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtZXNzYWdlVG9TZXJ2ZXIgPSB7XHJcbiAgICBBQ0NFUFQ6ICdBQ0NFUFQnLFxyXG4gICAgREVDTElORTogJ0RFQ0xJTkUnLFxyXG4gICAgT0ZGRVI6ICdPRkZFUicsXHJcbiAgICBCbE9DSzogJ0JsT0NLJyxcclxuICAgIFVOQkxPQ0s6ICdVTkJMT0NLJyxcclxuICAgIE1FU1NBR0U6ICdNRVNTQUdFJ1xyXG5cclxufVxyXG4vLyBzZXJ2ZXIgc2lkZSBtZXNzYWdlXHJcbmV4cG9ydCBjb25zdCBtZXNzYWdlQ2F0ZWdvcmllcz17XHJcbiAgICBBQ0tOT1dMRURHRU1FTlQ6J0FDS05PV0xFREdFTUVOVCcsXHJcbiAgICBQRUVSOidQRUVSJ1xyXG59IiwiaW1wb3J0IHsgYWN0aW9uVHlwZXMgfSBmcm9tICcuL2FjdGlvblR5cGVzJ1xyXG5pbXBvcnQgeyBtZXNzYWdlc0Zyb21TZXJ2ZXIgfSBmcm9tICcuL21lc3NhZ2VUeXBlcydcclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRXU29ja2V0KHsgdXJsLCBkaXNwYXRjaCB9KSB7XHJcblxyXG4gICAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5TRVRfU09DS0VULCBzb2NrZXQ6IG5ldyBXZWJTb2NrZXQodXJsKSB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0SGFuZ291dCh7IGRpc3BhdGNoLCBoYW5nb3V0IH0pIHtcclxuICAgIGRpc3BhdGNoKHsgdHlwZTogYWN0aW9uVHlwZXMuU0VMRUNURURfSEFOR09VVCwgaGFuZ291dCB9KVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJleHBvcnQgZnVuY3Rpb24gaGFuZ291dFRvTWVzc2FnZSh7IGhhbmdvdXQsIHR5cGUgfSkge1xyXG4gXHJcbiAgICByZXR1cm57IHVzZXJuYW1lOiBoYW5nb3V0LnVzZXJuYW1lLCB0eXBlLCBtZXNzYWdlOiBoYW5nb3V0Lm1lc3NhZ2UgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWVzc2FnZVRvSGFuZ291dCh7IG1lc3NhZ2UsIGhhbmdvdXQgfSkge1xyXG4gIFxyXG4gICAgcmV0dXJuIHsgLi4uaGFuZ291dCwgc3RhdGU6IG1lc3NhZ2UudHlwZSwgbWVzc2FnZTogbWVzc2FnZSB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXNzYWdlVG9OZXdIYW5nb3V0KG1zZykge1xyXG4gICAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHR5cGUsIG1lc3NhZ2UgfSA9IG1zZ1xyXG4gICAgY29uc3QgaGFuZ291dCA9IHsgdXNlcm5hbWUsIHN0YXRlOiB0eXBlLCBlbWFpbCwgbWVzc2FnZSB9XHJcbiAgICByZXR1cm4gaGFuZ291dFxyXG59IiwiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncHJlYWN0L2hvb2tzJ1xyXG5pbXBvcnQgeyBhY3Rpb25UeXBlcyB9IGZyb20gJy4vYWN0aW9uVHlwZXMnXHJcbmltcG9ydCB7IG1lc3NhZ2VUb0hhbmdvdXQsIG1lc3NhZ2VUb05ld0hhbmdvdXQgfSBmcm9tICcuL21lc3NhZ2VDb252ZXJ0ZXInXHJcbmltcG9ydCB7IG1lc3NhZ2VzRnJvbVNlcnZlciwgbWVzc2FnZUNhdGVnb3JpZXMgfSBmcm9tICcuL21lc3NhZ2VUeXBlcydcclxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNvY2tldCh7IHNvY2tldCwgZGlzcGF0Y2gsIGhhbmdvdXQgfSkge1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHNvY2tldCkge1xyXG4gICAgICAgICAgICBzb2NrZXQub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IEpTT04ucGFyc2UobWVzc2FnZS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtc2cuY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIG1lc3NhZ2VDYXRlZ29yaWVzLkFDS05PV0xFREdFTUVOVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQWNraG93bGVkZ2VtZW50cyh7IGRpc3BhdGNoLCBtc2csaGFuZ291dCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgbWVzc2FnZUNhdGVnb3JpZXMuUEVFUjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUGVlck1lc3NhZ2VzKHsgZGlzcGF0Y2gsIG1zZywgaGFuZ291dCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZSBjYXRlb3J5IGlzIG5vdCBkZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzb2NrZXQub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzb2NrZXQub25lcnJvciA9IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW3NvY2tldF0pXHJcblxyXG4gICAgcmV0dXJuIG51bGxcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFja2hvd2xlZGdlbWVudHMoeyBkaXNwYXRjaCwgbXNnLGhhbmdvdXQgfSkge1xyXG4gICAgbGV0IHVwZGF0ZWRIYW5nb3V0ID0gbWVzc2FnZVRvSGFuZ291dCh7IGhhbmdvdXQsIG1lc3NhZ2U6IG1zZyB9KVxyXG4gICAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5BQ0tOT1dMRURHRU1FTlRfUkVDSUVWRUQsIGhhbmdvdXQ6IHVwZGF0ZWRIYW5nb3V0IH0pXHJcbiAgICB1cGRhdGVIYW5nb3V0U3RhdGVJbkxvY2FsU3RvcmFnZShgJHt1c2VybmFtZX0taGFuZ291dHNgLCB1cGRhdGVkSGFuZ291dClcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUGVlck1lc3NhZ2VzKHsgZGlzcGF0Y2gsIG1zZywgaGFuZ291dCB9KSB7XHJcbiAgICBsZXQgdXBkYXRlZEhhbmdvdXQgPSBtZXNzYWdlVG9IYW5nb3V0KHsgaGFuZ291dCwgbWVzc2FnZTogbXNnIH0pXHJcbiAgICBsZXQgbmV3SGFuZ291dCA9bWVzc2FnZVRvTmV3SGFuZ291dChtc2cpXHJcbiAgICBzd2l0Y2ggKG1zZy50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBtZXNzYWdlc0Zyb21TZXJ2ZXIuQkxPQ0tFUjpcclxuICAgICAgICBjYXNlIG1lc3NhZ2VzRnJvbVNlcnZlci5ERUNMSU5FUjpcclxuICAgICAgICBjYXNlIG1lc3NhZ2VzRnJvbVNlcnZlci5NRVNTQU5HRVI6XHJcbiAgICAgICAgY2FzZSBtZXNzYWdlc0Zyb21TZXJ2ZXIuVU5CTE9DS0VSOlxyXG4gICAgICAgIGNhc2UgbWVzc2FnZXNGcm9tU2VydmVyLkFDQ0VQVEVSOlxyXG4gICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLkhBTkdPVVRfQ0hBTkdFRF9JVFNfU1RBVEUsIGhhbmdvdXQ6dXBkYXRlZEhhbmdvdXQgfSlcclxuICAgICAgICAgICAgdXBkYXRlSGFuZ291dFN0YXRlSW5Mb2NhbFN0b3JhZ2UoYCR7dXNlcm5hbWV9LWhhbmdvdXRzYCwgdXBkYXRlZEhhbmdvdXQpXHJcbiAgICAgICAgICAgIGNhc2UgbWVzc2FnZXNGcm9tU2VydmVyLk9GRkVSRVI6XHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLkhBTkdPVVRfQ0hBTkdFRF9JVFNfU1RBVEUsIGhhbmdvdXQ6bmV3SGFuZ291dCB9KVxyXG4gICAgICAgICAgICAgICAgYWRkTmV3SGFuZ291dFRvTG9jYWxTdG9yYWdlKGAke3VzZXJuYW1lfS1oYW5nb3V0c2AsIHVwZGF0ZWRIYW5nb3V0KVxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZSB0eXBlIGZvciBtZXNzYWdlc0Zyb21TZXJ2ZXIgaXMgbm90IGRlZmluZWQnKVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVIYW5nb3V0U3RhdGVJbkxvY2FsU3RvcmFnZShrZXksIGhhbmdvdXQpIHtcclxuICAgIGNvbnN0IGhhbmdvdXRzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIGNvbnN0IHVwZGF0ZWQgPSBoYW5nb3V0cy5tYXAoKGcpID0+IHtcclxuICAgICAgICBpZiAoZy51c2VybmFtZSA9PT0gaGFuZ291dC51c2VybmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZ291dFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkKSlcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTmV3SGFuZ291dFRvTG9jYWxTdG9yYWdlKGtleSwgaGFuZ291dCkge1xyXG4gICAgY29uc3QgaGFuZ291dHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgY29uc3QgaW5zZXJ0ZWQgPSBoYW5nb3V0cy5wdXNoKGhhbmdvdXQpXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGluc2VydGVkKSlcclxuXHJcbn0iLCJpbXBvcnQgeyBoLCBjcmVhdGVDb250ZXh0IH0gZnJvbSAncHJlYWN0JztcclxuaW1wb3J0IHsgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZU1lbW8sIHVzZVJlZHVjZXIsIHVzZUVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7IHJlZHVjZXIsIGluaXRTdGF0ZSB9IGZyb20gJy4vcmVkdWNlcidcclxuaW1wb3J0IHsgaW5pdFdTb2NrZXQgfSBmcm9tICcuL2FjdGlvbnMnXHJcbmltcG9ydCB7IHVzZVNvY2tldCB9IGZyb20gJy4vdXNlU29ja2V0J1xyXG5cclxuY29uc3QgSGFuZ291dENvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlSGFuZ291dENvbnRleHQoKSB7XHJcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoSGFuZ291dENvbnRleHQpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VIYW5nb3V0Q29udGV4dCBtdXN0IGJlIHVzZWQgd2l0aCBIYW5nb3V0c1Byb3ZpZGVyJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY29udGV4dDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEhhbmdvdXRzUHJvdmlkZXIocHJvcHMpIHtcclxuICBjb25zdCB7IHNvY2tldFVybCB9ID0gcHJvcHNcclxuICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZVJlZHVjZXIocmVkdWNlciwgaW5pdFN0YXRlKVxyXG4gIGNvbnN0IHsgc29ja2V0LCBoYW5nb3V0IH0gPSBzdGF0ZVxyXG4gIGNvbnN0IHNvY2tldGhhbmRsZXIgPSB1c2VTb2NrZXQoeyBkaXNwYXRjaCwgc29ja2V0LCBoYW5nb3V0IH0pXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpbml0V1NvY2tldCh7IHVybDogc29ja2V0VXJsLCBkaXNwYXRjaCB9KVxyXG4gIH0sIFtdKVxyXG5cclxuXHJcbiAgY29uc3QgdmFsdWUgPSB1c2VNZW1vKCgpID0+IFtzdGF0ZSwgZGlzcGF0Y2hdLCBbc3RhdGVdKTtcclxuICByZXR1cm4gPEhhbmdvdXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0gey4uLnByb3BzfSAvPjtcclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0J1xyXG5pbXBvcnQgTW9iaWxlIGZyb20gJy4vSGFuZ291dCdcclxuaW1wb3J0IHsgSGFuZ291dHNQcm92aWRlciB9IGZyb20gJy4vc3RhdGUvSGFuZ291dHNQcm92aWRlcidcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIDxIYW5nb3V0c1Byb3ZpZGVyIHNvY2tldFVybD1cIndzOi8vbG9jYWxob3N0OjMwMDAvaGFuZ291dHNcIj5cclxuICAgICAgICA8TW9iaWxlIC8+XHJcbiAgICA8L0hhbmdvdXRzUHJvdmlkZXI+XHJcblxyXG59Il0sIm5hbWVzIjpbInN0eWxlIiwicGFkZGluZyIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsImJveFNpemluZyIsImZsZXgiLCJUZXh0SW5wdXQiLCJwcm9wcyIsImlkIiwidHlwZSIsImRpc3BsYXkiLCJ3aWR0aCIsIkhhbmdvdXQiLCJoYW5nb3V0cyIsIm9uU2VhcmNoIiwib25TZWxlY3QiLCJtYXAiLCJnIiwidXNlcm5hbWUiLCJhY3Rpb25UeXBlcyIsIlNFVF9TT0NLRVQiLCJMT0FEX0hBTkdPVVRTIiwiTE9BRF9NRVNTQUdFUyIsIkZJTFRFUl9IQU5HT1VUIiwiU0VMRUNURURfSEFOR09VVCIsIkZFVENIX1NUQVJURUQiLCJGRVRDSF9TVUNDRVNTIiwiRkVUQ0hfRkFJTEVEIiwiT05MSU5FX1NUQVRFX0NIQU5HRUQiLCJPRkZFUl9TVEFSVEVEIiwiT0ZGRVJfU1VDQ0VTUyIsIk9GRkVSX0ZBSUxFRCIsIkFDQ0VQVF9TVEFSVEVEIiwiQUNDRVBUX1NVQ0NFU1MiLCJBQ0NFUFRfRkFJTEVEIiwiQkxPQ0tfU1RBUlRFRCIsIkJMT0NLX1NVQ0NFU1MiLCJCTE9DS19GQUlMRUQiLCJVTkJMT0NLX1NUQVJURUQiLCJVTkJMT0NLX1NVQ0NFU1MiLCJVTkJMT0NLX0ZBSUxFRCIsIk1FU1NBR0VfU1RBUlRFRCIsIk1FU1NBR0VfU1VDQ0VTUyIsIk1FU1NBR0VfRkFJTEVEIiwiREVDTElORV9TVEFSVEVEIiwiREVDTElORV9TVUNDRVNTIiwiREVDTElORV9GQUlMRUQiLCJIQU5HT1VUX0NIQU5HRURfSVRTX1NUQVRFIiwiT0ZGRVJFUl9SRUNJRVZFRCIsIkFDS05PV0xFREdFTUVOVF9SRUNJRVZFRCIsImluaXRTdGF0ZSIsImhhbmdvdXQiLCJzb2NrZXQiLCJtZXNzYWdlcyIsInJlZHVjZXIiLCJzdGF0ZSIsImFjdGlvbiIsImZpbmQiLCJtZXNzYWdlc0Zyb21TZXJ2ZXIiLCJCTE9DS0VSIiwiQUNDRVBURVIiLCJVTkJMT0NLRVIiLCJPRkZFUkVSIiwiREVDTElORVIiLCJNRVNTQU5HRVIiLCJtZXNzYWdlQ2F0ZWdvcmllcyIsIkFDS05PV0xFREdFTUVOVCIsIlBFRVIiLCJpbml0V1NvY2tldCIsInVybCIsImRpc3BhdGNoIiwiV2ViU29ja2V0IiwibWVzc2FnZVRvSGFuZ291dCIsIm1lc3NhZ2UiLCJtZXNzYWdlVG9OZXdIYW5nb3V0IiwibXNnIiwiZW1haWwiLCJ1c2VTb2NrZXQiLCJ1c2VFZmZlY3QiLCJvbm1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJkYXRhIiwiY2F0ZWdvcnkiLCJoYW5kbGVBY2tob3dsZWRnZW1lbnRzIiwiaGFuZGxlUGVlck1lc3NhZ2VzIiwiRXJyb3IiLCJvbmNsb3NlIiwib25lcnJvciIsImVycm9yIiwidXBkYXRlZEhhbmdvdXQiLCJ1cGRhdGVIYW5nb3V0U3RhdGVJbkxvY2FsU3RvcmFnZSIsIm5ld0hhbmdvdXQiLCJhZGROZXdIYW5nb3V0VG9Mb2NhbFN0b3JhZ2UiLCJrZXkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidXBkYXRlZCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJpbnNlcnRlZCIsInB1c2giLCJIYW5nb3V0Q29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJIYW5nb3V0c1Byb3ZpZGVyIiwic29ja2V0VXJsIiwidXNlUmVkdWNlciIsInNvY2tldGhhbmRsZXIiLCJ2YWx1ZSIsInVzZU1lbW8iLCJNb2JpbGUiXSwibWFwcGluZ3MiOiI7O0FBRUEsTUFBTUEsS0FBSyxHQUFHO0FBQ1pDLEVBQUFBLE9BQU8sRUFBRSxDQURHO0FBRVpDLEVBQUFBLFVBQVUsRUFBRSxFQUZBO0FBR1pDLEVBQUFBLFdBQVcsRUFBRSxFQUhEO0FB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
