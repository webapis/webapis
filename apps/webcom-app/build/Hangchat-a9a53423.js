import { k as h, M as y } from './index-c3b1517c.js';
import { B as Button } from './Button-45126f13.js';
import { L as Layout } from './Layout-29e9ff39.js';
import { M as Message } from './Message-ca2ac793.js';

const styles = {
  root: {
    display: 'flex',
    alignItems: 'center'
  },
  input: {//margin:0
  }
};
function MessageEditor({
  messageText,
  onMessageText,
  onMessage
}) {
  return h("div", {
    style: styles.root
  }, h("input", {
    type: "text",
    onChange: onMessageText,
    "data-testid": "message-input"
  }), h("div", null, h(Button, {
    title: "send",
    id: "MESSAGE",
    onClick: onMessage,
    "data-testid": "send-btn"
  })));
}

const styles$1 = {
  messageContainer: {
    width: '100%',
    // backgroundColor: 'orange',
    height: '20vh',
    overflow: 'auto'
  }
};
function Messages({
  messages,
  username,
  onMessage,
  onMessageText,
  messageText
}) {
  const scrollerRef = y(null);

  function onSend(e) {
    onMessage(e);
    scrollerRef.current.scrollTop = scrollerRef.current.scrollHeight;
  }

  return h("div", null, h("div", {
    style: styles$1.messageContainer,
    ref: scrollerRef
  }, messages && messages.length > 0 && floatMessages({
    messages: sortMessages({
      messages
    }),
    username
  }).map(m => h("div", {
    style: {
      display: 'flex'
    }
  }, ' ', h(Message, {
    message: m
  })))), h(MessageEditor, {
    onMessage: onSend,
    messageText: messageText,
    onMessageText: onMessageText
  }));
}

function floatMessages({
  messages,
  username
}) {
  if (messages && messages.length > 0 && username) {
    return messages.map(msg => {
      if (msg.username === username) {
        return { ...msg,
          float: 'right',
          username: 'me'
        };
      } else {
        return { ...msg,
          float: 'left'
        };
      }
    });
  } else {
    return null;
  }
}

function sortMessages({
  messages
}) {
  if (messages) {
    return messages.sort();
  } else {
    return null;
  }
}

function Hangchat({
  messages = [],
  onMessageText,
  onMessage,
  messageText,
  username
}) {
  return h(Layout, {
    id: "hangchat-ui"
  }, h(Messages, {
    messages: messages,
    onMessage: onMessage,
    onMessageText: onMessageText,
    messageText: true,
    username: username
  }));
}

export default Hangchat;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSGFuZ2NoYXQtYTlhNTM0MjMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9oYW5nb3V0cy91aS9NZXNzYWdlRWRpdG9yLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL3VpL01lc3NhZ2VzLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL3N0YXRlLXVpL0hhbmdjaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXQgfSBmcm9tICcuLi8uLi9sYXlvdXQvVGV4dElucHV0JztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vbGF5b3V0L0J1dHRvbic7XHJcbmNvbnN0IHN0eWxlcyA9IHtcclxuICByb290OiB7XHJcbiAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcclxuICB9LFxyXG4gIGlucHV0OiB7XHJcbiAgICAvL21hcmdpbjowXHJcbiAgfSxcclxufTtcclxuZXhwb3J0IGZ1bmN0aW9uIE1lc3NhZ2VFZGl0b3IoeyBtZXNzYWdlVGV4dCwgb25NZXNzYWdlVGV4dCwgb25NZXNzYWdlIH0pIHtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBzdHlsZT17c3R5bGVzLnJvb3R9PlxyXG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBvbkNoYW5nZT17b25NZXNzYWdlVGV4dH0gIGRhdGEtdGVzdGlkPVwibWVzc2FnZS1pbnB1dFwiLz5cclxuICAgICAgPGRpdj5cclxuICAgICAgICA8QnV0dG9uIHRpdGxlPVwic2VuZFwiIGlkPSdNRVNTQUdFJyBvbkNsaWNrPXtvbk1lc3NhZ2V9IGRhdGEtdGVzdGlkPSdzZW5kLWJ0bicvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICcuL01lc3NhZ2UnO1xyXG5pbXBvcnQgeyBNZXNzYWdlRWRpdG9yIH0gZnJvbSAnLi9NZXNzYWdlRWRpdG9yJztcclxuY29uc3Qgc3R5bGVzID0ge1xyXG4gIG1lc3NhZ2VDb250YWluZXI6IHtcclxuICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAvLyBiYWNrZ3JvdW5kQ29sb3I6ICdvcmFuZ2UnLFxyXG4gICAgaGVpZ2h0OiAnMjB2aCcsXHJcbiAgICBvdmVyZmxvdzogJ2F1dG8nLFxyXG4gIH0sXHJcbn07XHJcbmV4cG9ydCBmdW5jdGlvbiBNZXNzYWdlcyh7XHJcbiAgbWVzc2FnZXMsXHJcbiAgdXNlcm5hbWUsXHJcbiAgb25NZXNzYWdlLFxyXG4gIG9uTWVzc2FnZVRleHQsXHJcbiAgbWVzc2FnZVRleHQsXHJcbn0pIHtcclxuICBjb25zdCBzY3JvbGxlclJlZiA9IHVzZVJlZihudWxsKTtcclxuICBmdW5jdGlvbiBvblNlbmQoZSkge1xyXG4gICAgb25NZXNzYWdlKGUpO1xyXG4gICAgc2Nyb2xsZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBzY3JvbGxlclJlZi5jdXJyZW50LnNjcm9sbEhlaWdodDtcclxuICB9XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXY+XHJcbiAgICAgIDxkaXYgc3R5bGU9e3N0eWxlcy5tZXNzYWdlQ29udGFpbmVyfSByZWY9e3Njcm9sbGVyUmVmfT5cclxuICAgICAgICB7bWVzc2FnZXMgJiZcclxuICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgIGZsb2F0TWVzc2FnZXMoeyBtZXNzYWdlczogc29ydE1lc3NhZ2VzKHsgbWVzc2FnZXMgfSksIHVzZXJuYW1lIH0pLm1hcChcclxuICAgICAgICAgICAgKG0pID0+IChcclxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JyB9fT5cclxuICAgICAgICAgICAgICAgIHsnICd9XHJcbiAgICAgICAgICAgICAgICA8TWVzc2FnZSBtZXNzYWdlPXttfSAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPE1lc3NhZ2VFZGl0b3Igb25NZXNzYWdlPXtvblNlbmR9IG1lc3NhZ2VUZXh0PXttZXNzYWdlVGV4dH1vbk1lc3NhZ2VUZXh0PXtvbk1lc3NhZ2VUZXh0fSAvPlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG5mdW5jdGlvbiBmbG9hdE1lc3NhZ2VzKHsgbWVzc2FnZXMsIHVzZXJuYW1lIH0pIHtcclxuICBpZiAobWVzc2FnZXMgJiYgbWVzc2FnZXMubGVuZ3RoID4gMCAmJiB1c2VybmFtZSkge1xyXG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcCgobXNnKSA9PiB7XHJcbiAgICAgIGlmIChtc2cudXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBmbG9hdDogJ3JpZ2h0JywgdXNlcm5hbWU6ICdtZScgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4geyAuLi5tc2csIGZsb2F0OiAnbGVmdCcgfTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBzb3J0TWVzc2FnZXMoeyBtZXNzYWdlcyB9KSB7XHJcbiAgaWYgKG1lc3NhZ2VzKSB7XHJcbiAgICByZXR1cm4gbWVzc2FnZXMuc29ydCgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VzIH0gZnJvbSAnLi4vdWkvTWVzc2FnZXMnO1xyXG5pbXBvcnQgeyBMYXlvdXQgfSBmcm9tICcuL0xheW91dCc7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhhbmdjaGF0KHtcclxuICBtZXNzYWdlcyA9IFtdLFxyXG4gIG9uTWVzc2FnZVRleHQsXHJcbiAgb25NZXNzYWdlLFxyXG4gIG1lc3NhZ2VUZXh0LFxyXG4gIHVzZXJuYW1lXHJcbn0pIHtcclxuICByZXR1cm4gKFxyXG4gICAgPExheW91dCBpZD1cImhhbmdjaGF0LXVpXCI+XHJcbiAgICAgIDxNZXNzYWdlc1xyXG4gICAgICAgIG1lc3NhZ2VzPXttZXNzYWdlc31cclxuICAgICAgICBvbk1lc3NhZ2U9e29uTWVzc2FnZX1cclxuICAgICAgICBvbk1lc3NhZ2VUZXh0PXtvbk1lc3NhZ2VUZXh0fVxyXG4gICAgICAgIG1lc3NhZ2VUZXh0XHJcbiAgICAgICAgdXNlcm5hbWU9e3VzZXJuYW1lfVxyXG4gICAgICAvPlxyXG4gICAgPC9MYXlvdXQ+XHJcbiAgKTtcclxufVxyXG4iXSwibmFtZXMiOlsic3R5bGVzIiwicm9vdCIsImRpc3BsYXkiLCJhbGlnbkl0ZW1zIiwiaW5wdXQiLCJNZXNzYWdlRWRpdG9yIiwibWVzc2FnZVRleHQiLCJvbk1lc3NhZ2VUZXh0Iiwib25NZXNzYWdlIiwibWVzc2FnZUNvbnRhaW5lciIsIndpZHRoIiwiaGVpZ2h0Iiwib3ZlcmZsb3ciLCJNZXNzYWdlcyIsIm1lc3NhZ2VzIiwidXNlcm5hbWUiLCJzY3JvbGxlclJlZiIsInVzZVJlZiIsIm9uU2VuZCIsImUiLCJjdXJyZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwibGVuZ3RoIiwiZmxvYXRNZXNzYWdlcyIsInNvcnRNZXNzYWdlcyIsIm1hcCIsIm0iLCJtc2ciLCJmbG9hdCIsInNvcnQiLCJIYW5nY2hhdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFHQSxNQUFNQSxNQUFNLEdBQUc7QUFDYkMsRUFBQUEsSUFBSSxFQUFFO0FBQ0pDLElBQUFBLE9BQU8sRUFBRSxNQURMO0FBRUpDLElBQUFBLFVBQVUsRUFBRTtBQUZSLEdBRE87QUFLYkMsRUFBQUEsS0FBSyxFQUFFO0FBQUE7QUFMTSxDQUFm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
