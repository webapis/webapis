import { h, x as d, l } from './index-08f7f81c.js';
import { B as Button } from './Button-1f81ff0e.js';
import { L as Layout } from './Layout-23482f17.js';
import { M as Message } from './Message-3c7da47f.js';

const styles = {
  root: {
    display: 'flex',
    alignItems: 'center'
  },
  input: {//margin:0
  }
};
function MessageEditor({
  messageText,
  onMessageText,
  onMessage
}) {
  return h("div", {
    style: styles.root
  }, h("input", {
    type: "text",
    onChange: onMessageText,
    "data-testid": "message-input"
  }), h("div", null, h(Button, {
    title: "send",
    id: "MESSAGE",
    onClick: onMessage,
    "data-testid": "send-btn"
  })));
}

const styles$1 = {
  messageContainer: {
    // width: '100%',
    boxSizing: 'border-box',
    backgroundColor: 'orange',
    flex: 15,
    overflowY: 'auto',
    overflowX: "hidden"
  }
};
function Messages({
  messages,
  onMessage,
  onMessageText,
  messageText,
  username
}) {
  const scrollerRef = d(null);
  l(() => {
    if (messages) {
      scrollerRef.current.scrollTop = scrollerRef.current.scrollHeight;
    }
  }, [messages]);

  function onSend(e) {
    onMessage(e);
    scrollerRef.current.scrollTop = scrollerRef.current.scrollHeight;
  }

  return h("div", {
    style: {
      boxSizing: 'border-box',
      width: '100%',
      height: '100%',
      backgroundColor: 'yellow',
      display: 'flex',
      flexDirection: 'column'
    }
  }, h("div", {
    style: styles$1.messageContainer,
    ref: scrollerRef
  }, messages && messages.length > 0 && floatMessages({
    messages: sortMessages({
      messages
    }),
    username
  }).map(m => h("div", {
    style: {
      display: 'flex'
    }
  }, ' ', h(Message, {
    message: m
  })))), h("div", {
    style: {
      flex: 1,
      backgroundColor: 'green'
    }
  }, h(MessageEditor, {
    onMessage: onSend,
    messageText: messageText,
    onMessageText: onMessageText
  })));
}

function floatMessages({
  messages,
  username
}) {
  if (messages && messages.length > 0 && username) {
    return messages.map(msg => {
      if (msg.username === username) {
        return { ...msg,
          float: 'right',
          username: 'me'
        };
      } else {
        return { ...msg,
          float: 'left'
        };
      }
    });
  } else {
    return null;
  }
}

function sortMessages({
  messages
}) {
  if (messages) {
    return messages.sort();
  } else {
    return null;
  }
}

function Hangchat({
  messages = [],
  onMessageText,
  onMessage,
  messageText,
  username
}) {
  return h(Layout, {
    id: "hangchat-ui"
  }, h(Messages, {
    messages: messages,
    onMessage: onMessage,
    onMessageText: onMessageText,
    messageText: true,
    username: username
  }));
}

export default Hangchat;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSGFuZ2NoYXQtMWI1NWRhMTQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9oYW5nb3V0cy91aS9NZXNzYWdlRWRpdG9yLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL3VpL01lc3NhZ2VzLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL3N0YXRlLXVpL0hhbmdjaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgVGV4dElucHV0IH0gZnJvbSAnLi4vLi4vbGF5b3V0L1RleHRJbnB1dCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi8uLi9sYXlvdXQvQnV0dG9uJztcbmNvbnN0IHN0eWxlcyA9IHtcbiAgcm9vdDoge1xuICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbiAgaW5wdXQ6IHtcbiAgICAvL21hcmdpbjowXG4gIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIE1lc3NhZ2VFZGl0b3IoeyBtZXNzYWdlVGV4dCwgb25NZXNzYWdlVGV4dCwgb25NZXNzYWdlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXtzdHlsZXMucm9vdH0+XG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBvbkNoYW5nZT17b25NZXNzYWdlVGV4dH0gIGRhdGEtdGVzdGlkPVwibWVzc2FnZS1pbnB1dFwiLz5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxCdXR0b24gdGl0bGU9XCJzZW5kXCIgaWQ9J01FU1NBR0UnIG9uQ2xpY2s9e29uTWVzc2FnZX0gZGF0YS10ZXN0aWQ9J3NlbmQtYnRuJy8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xuaW1wb3J0IHsgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdwcmVhY3QvaG9va3MnO1xuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4vTWVzc2FnZSc7XG5pbXBvcnQgeyBNZXNzYWdlRWRpdG9yIH0gZnJvbSAnLi9NZXNzYWdlRWRpdG9yJztcbmNvbnN0IHN0eWxlcyA9IHtcbiAgbWVzc2FnZUNvbnRhaW5lcjoge1xuICAgLy8gd2lkdGg6ICcxMDAlJyxcbiAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdvcmFuZ2UnLFxuICAgIGZsZXg6MTUsXG4gICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgb3ZlcmZsb3dYOiBcImhpZGRlblwiXG4gICAgXG4gIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIE1lc3NhZ2VzKHtcbiAgbWVzc2FnZXMsXG4gIG9uTWVzc2FnZSxcbiAgb25NZXNzYWdlVGV4dCxcbiAgbWVzc2FnZVRleHQsXG4gIHVzZXJuYW1lLFxufSkge1xuICBjb25zdCBzY3JvbGxlclJlZiA9IHVzZVJlZihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtZXNzYWdlcykge1xuICAgICAgc2Nyb2xsZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBzY3JvbGxlclJlZi5jdXJyZW50LnNjcm9sbEhlaWdodDtcbiAgICB9XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIGZ1bmN0aW9uIG9uU2VuZChlKSB7XG4gICAgb25NZXNzYWdlKGUpO1xuICAgIHNjcm9sbGVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gc2Nyb2xsZXJSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQ7XG4gIH1cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7ICBib3hTaXppbmc6ICdib3JkZXItYm94Jyx3aWR0aDonMTAwJScsaGVpZ2h0OicxMDAlJywgYmFja2dyb3VuZENvbG9yOid5ZWxsb3cnLCBkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nfX0+XG4gICAgICA8ZGl2IHN0eWxlPXtzdHlsZXMubWVzc2FnZUNvbnRhaW5lcn0gcmVmPXtzY3JvbGxlclJlZn0+XG4gICAgICAgIHttZXNzYWdlcyAmJlxuICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICBmbG9hdE1lc3NhZ2VzKHsgbWVzc2FnZXM6IHNvcnRNZXNzYWdlcyh7IG1lc3NhZ2VzIH0pLCB1c2VybmFtZSB9KS5tYXAoXG4gICAgICAgICAgICAobSkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JyB9fT5cbiAgICAgICAgICAgICAgICB7JyAnfVxuICAgICAgICAgICAgICAgIDxNZXNzYWdlIG1lc3NhZ2U9e219IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9e3tmbGV4OjEsIGJhY2tncm91bmRDb2xvcjonZ3JlZW4nfX0+XG4gICAgICA8TWVzc2FnZUVkaXRvclxuICAgICAgICBvbk1lc3NhZ2U9e29uU2VuZH1cbiAgICAgICAgbWVzc2FnZVRleHQ9e21lc3NhZ2VUZXh0fVxuICAgICAgICBvbk1lc3NhZ2VUZXh0PXtvbk1lc3NhZ2VUZXh0fVxuICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgXG4gICAgPC9kaXY+XG4gICk7XG59XG5mdW5jdGlvbiBmbG9hdE1lc3NhZ2VzKHsgbWVzc2FnZXMsIHVzZXJuYW1lIH0pIHtcbiAgaWYgKG1lc3NhZ2VzICYmIG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgdXNlcm5hbWUpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKChtc2cpID0+IHtcbiAgICAgIGlmIChtc2cudXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1zZywgZmxvYXQ6ICdyaWdodCcsIHVzZXJuYW1lOiAnbWUnIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyAuLi5tc2csIGZsb2F0OiAnbGVmdCcgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gc29ydE1lc3NhZ2VzKHsgbWVzc2FnZXMgfSkge1xuICBpZiAobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMuc29ydCgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcbmltcG9ydCB7IE1lc3NhZ2VzIH0gZnJvbSAnLi4vdWkvTWVzc2FnZXMnO1xuaW1wb3J0IHsgTGF5b3V0IH0gZnJvbSAnLi9MYXlvdXQnO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSGFuZ2NoYXQoe1xuICBtZXNzYWdlcyA9IFtdLFxuICBvbk1lc3NhZ2VUZXh0LFxuICBvbk1lc3NhZ2UsXG4gIG1lc3NhZ2VUZXh0LFxuICB1c2VybmFtZVxufSkge1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXQgaWQ9XCJoYW5nY2hhdC11aVwiID5cbiAgICAgIDxNZXNzYWdlc1xuICAgICAgICBtZXNzYWdlcz17bWVzc2FnZXN9XG4gICAgICAgIG9uTWVzc2FnZT17b25NZXNzYWdlfVxuICAgICAgICBvbk1lc3NhZ2VUZXh0PXtvbk1lc3NhZ2VUZXh0fVxuICAgICAgICBtZXNzYWdlVGV4dFxuICAgICAgICB1c2VybmFtZT17dXNlcm5hbWV9XG4gICAgICAvPlxuICAgIDwvTGF5b3V0PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInN0eWxlcyIsInJvb3QiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImlucHV0IiwiTWVzc2FnZUVkaXRvciIsIm1lc3NhZ2VUZXh0Iiwib25NZXNzYWdlVGV4dCIsIm9uTWVzc2FnZSIsIm1lc3NhZ2VDb250YWluZXIiLCJib3hTaXppbmciLCJiYWNrZ3JvdW5kQ29sb3IiLCJmbGV4Iiwib3ZlcmZsb3dZIiwib3ZlcmZsb3dYIiwiTWVzc2FnZXMiLCJtZXNzYWdlcyIsInVzZXJuYW1lIiwic2Nyb2xsZXJSZWYiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0Iiwib25TZW5kIiwiZSIsIndpZHRoIiwiaGVpZ2h0IiwiZmxleERpcmVjdGlvbiIsImxlbmd0aCIsImZsb2F0TWVzc2FnZXMiLCJzb3J0TWVzc2FnZXMiLCJtYXAiLCJtIiwibXNnIiwiZmxvYXQiLCJzb3J0IiwiSGFuZ2NoYXQiXSwibWFwcGluZ3MiOiI7Ozs7O0FBR0EsTUFBTUEsTUFBTSxHQUFHO0FBQ2JDLEVBQUFBLElBQUksRUFBRTtBQUNKQyxJQUFBQSxPQUFPLEVBQUUsTUFETDtBQUVKQyxJQUFBQSxVQUFVLEVBQUU7QUFGUixHQURPO0FBS2JDLEVBQUFBLEtBQUssRUFBRTtBQUFBO0FBTE0sQ0FBZjtBQVNPLFNBQVNDLGFBQVQsQ0FBdUI7QUFBRUMsRUFBQUEsV0FBRjtBQUFlQyxFQUFBQSxhQUFmO0FBQThCQyxFQUFBQTtBQUE5QixDQUF2QixFQUFrRTtBQUN2RSxTQUNFO0FBQUssSUFBQSxLQUFLLEVBQUVSLE1BQU0sQ0FBQ0M7QUFBbkIsS0FDRTtBQUFPLElBQUEsSUFBSSxFQUFDLE1BQVo7QUFBbUIsSUFBQSxRQUFRLEVBQUVNLGFBQTdCO0FBQTZDLG1CQUFZO0FBQXpELElBREYsRUFFRSxlQUNFLEVBQUMsTUFBRDtBQUFRLElBQUEsS0FBSyxFQUFDLE1BQWQ7QUFBcUIsSUFBQSxFQUFFLEVBQUMsU0FBeEI7QUFBa0MsSUFBQSxPQUFPLEVBQUVDLFNBQTNDO0FBQXNELG1CQUFZO0FBQWxFLElBREYsQ0FGRixDQURGO0FBUUQ7O0FDakJELE1BQU1SLFFBQU0sR0FBRztBQUNiUyxFQUFBQSxnQkFBZ0IsRUFBRTtBQUNqQjtBQUNBQyxJQUFBQSxTQUFTLEVBQUUsWUFGTTtBQUdmQyxJQUFBQSxlQUFlLEVBQUUsUUFIRjtBQUloQkMsSUFBQUEsSUFBSSxFQUFDLEVBSlc7QUFLaEJDLElBQUFBLFNBQVMsRUFBRSxNQUxLO0FBTWhCQyxJQUFBQSxTQUFTLEVBQUU7QUFOSztBQURMLENBQWY7QUFXTyxTQUFTQyxRQUFULENBQWtC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
