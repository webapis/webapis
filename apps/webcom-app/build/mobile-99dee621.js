import { m, p, v, u as useAuthContext, b as useRouteContext, z as useAppContext, h, A as Route, U, L } from './index-3fd2f1b7.js';
import { u as useWebSocketContext, a as useContactsContext } from './index-6a4077dd.js';

const status = {
  INVITEE: 'INVITEE',
  INVITER: 'INVITER',
  CHAT: 'CHAT',
  DECLINED: 'DECLINED',
  DECLINER: 'DECLINER',
  BLOCKED: 'BLOCKED',
  BLOCKER: 'BLOCKER'
};

const actionTypes = {
  FETCH_CONTACTS_STARTED: 'FETCH_CONTACTS_STARTED',
  FETCH_CONTACTS_SUCCESS: 'FETCH_CONTACTS_SUCCESS',
  FETCH_CONTACTS_FAILED: 'FETCH_CONTACTS_FAILED',
  GET_LOCAL_CONTACTS: 'GET_LOCAL_CONTACTS',
  FIND_CONTACT: 'FIND_CONTACT',
  CONTACT_IS_ONLINE: 'CONTACT_IS_ONLINE',
  CONTACT_IS_OFFLINE: 'CONTACT_IS_OFFLINE',
  CONTACT_STATE_CHANGED: 'CONTACT_STATE_CHANGED'
};

async function fetchContacts({
  dispatch,
  username
}) {
  try {
    dispatch({
      type: actionTypes.FETCH_CONTACTS_STARTED
    });
    const response = await fetch(`/contacts/find?username=${username}`);
    const {
      contacts
    } = await response.json();
    dispatch({
      type: actionTypes.FETCH_CONTACTS_SUCCESS,
      contacts
    });
  } catch (error) {
    dispatch({
      type: actionTypes.FETCH_CONTACTS_FAILED,
      error
    });
  }
}

function getLocalContacts({
  dispatch,
  contacts
}) {
  dispatch({
    type: actionTypes.GET_LOCAL_CONTACTS,
    contacts
  });
}

function findContact({
  dispatch,
  filter
}) {
  dispatch({
    type: actionTypes.FIND_CONTACT,
    filter
  });
}

const initState = {
  loading: false,
  error: null,
  contacts: []
};

function contactsReducer(state, action) {
  switch (action.type) {
    case actionTypes.FETCH_CONTACTS_STARTED:
      return { ...state,
        loading: true
      };

    case actionTypes.FETCH_CONTACTS_SUCCESS:
      return { ...state,
        loading: false,
        contacts: action.contacts
      };

    case actionTypes.FETCH_CONTACTS_FAILED:
      return { ...state,
        loading: false,
        error: action.error
      };

    case actionTypes.FIND_CONTACT:
      return { ...state,
        contacts: state.contacts.filter(c => c.username === action.filter)
      };

    case actionTypes.GET_LOCAL_CONTACTS:
      const nextState = { ...state,
        contacts: action.contacts
      };
      return nextState;

    case actionTypes.CONTACT_IS_ONLINE:
      return { ...state,
        contacts: state.contacts.map(c => {
          if (c.username === action.username) {
            return { ...c,
              online: true
            };
          }
        })
      };

    case actionTypes.CONTACT_IS_OFFLINE:
      return { ...state,
        contacts: state.contacts.map(c => {
          if (c.username === action.username) {
            return { ...c,
              online: false
            };
          }
        })
      };

    case actionTypes.CONTACT_STATE_CHANGED:
      return { ...state,
        contacts: state.contacts.map(c => {
          if (c.username === action.username) {
            return { ...c,
              state: action.state
            };
          }
        })
      };

    default:
      return state;
  }
}

function useContacts({
  filter,
  username
}) {
  const [state, dispatch] = m(contactsReducer, initState);
  p(() => {
    if (localStorage.getItem(`contacts-${username}`)) {
      const storage = JSON.parse(localStorage.getItem(`contacts-${username}`));
      getLocalContacts({
        dispatch,
        contacts: storage.contacts
      });
    } else {
      fetchContacts({
        dispatch,
        username
      });
    }
  }, []);
  p(() => {
    if (filter && filter.length > 3) {
      findContact({
        dispatch,
        filter
      });
    }
  }, [filter]);
  return {
    state
  };
}

function useWebSocket({
  target,
  dispatch
}) {
  const [message, setMessage] = v('');
  const {
    socket
  } = useWebSocketContext();

  function onInvite() {
    dispatch({
      type: actionTypes.CONTACT_STATE_CHANGED,
      username: target,
      state: status.INVITEE
    });
    let contact = {
      message,
      state: status.INVITEE,
      username: target
    };
    socket.send(JSON.stringify(contact));
  }

  function onAccept() {
    dispatch({
      type: actionTypes.CONTACT_STATE_CHANGED,
      username: target,
      state: status.CHAT
    });
    let contact = {
      message,
      state: status.CHAT,
      username: target
    };
    socket.send(JSON.stringify(contact));
  }

  function onDecline() {
    dispatch({
      type: actionTypes.CONTACT_STATE_CHANGED,
      username: target,
      state: status.DECLINED
    });
    let contact = {
      state: status.DECLINED,
      username: target
    };
    socket.send(JSON.stringify(contact));
  }

  function onBlock() {
    dispatch({
      type: actionTypes.CONTACT_STATE_CHANGED,
      username: target,
      state: status.BLOCKED
    });
    let contact = {
      state: status.BLOCKED,
      username: target
    };
    socket.send(JSON.stringify(contact));
  }

  function onUnblock() {
    dispatch({
      type: actionTypes.CONTACT_STATE_CHANGED,
      username: target,
      state: status.CHAT
    });
    let contact = {
      state: status.CHAT,
      username: target
    };
    socket.send(JSON.stringify(contact));
  }

  function onChange(e) {
    const {
      value
    } = e.target;
    setMessage(value);
  }

  function sendMessage() {
    try {
      let contact = {
        type: contactStatus.MESSAGE,
        username: target,
        message
      };
      debugger;
      socket.send(JSON.stringify(contact));
    } catch (error) {
      debugger;
    }
  }

  return {
    onInvite,
    onAccept,
    onDecline,
    onBlock,
    onUnblock,
    onChange,
    message,
    sendMessage
  };
}

const Contacts = L(() => import('./Contacts-f7279617.js'));
const Block = L(() => import('./Block-a2985eca.js'));
const Blocked = L(() => import('./Blocked-0c6a7f6c.js'));
const Chat = L(() => import('./Chat-7233e2d4.js'));
const Configure = L(() => import('./Configure-de70eb97.js'));
const Invite = L(() => import('./Invite-dae55ddb.js'));
const Invitee = L(() => import('./Invitee-c3107376.js'));
const Inviter = L(() => import('./Inviter-8b998a2e.js'));
function PeerToPeerMobile() {
  const authContext = useAuthContext();
  const [state, dispatch] = useContactsContext();
  const [route, setRoute] = useRouteContext();
  const {
    contact
  } = state;
  const {
    username
  } = authContext.state;
  const {
    accept_inv_img
  } = useAppContext();
  const {
    onInvite,
    onAccept,
    onBlock,
    onUnblock,
    onDecline,
    onChange,
    message,
    sendMessage
  } = useWebSocket({
    username,
    target: contact && contact.username,
    dispatch
  });
  p(() => {
    if (contact) {
      setRoute(`/${contact.state}`);
    }
  }, [contact]);

  function onSetting() {
    setRoute('/cofigure');
  }

  return h("div", {
    style: {
      height: '85vh'
    }
  }, h(Route, {
    path: "/contacts"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Contacts, null))), h(Route, {
    path: "/block"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Block, {
    contact: contact,
    onBlock: onBlock,
    setRoute: setRoute
  }))), h(Route, {
    path: "/blocked"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Blocked, {
    contact: contact,
    onUnblock: onUnblock,
    setRoute: setRoute
  }))), h(Route, {
    path: "/accepted"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Chat, {
    contact: contact,
    onSetting: onSetting,
    onChange: onChange,
    message: message,
    sendMessage: sendMessage
  }))), h(Route, {
    path: "/cofigure"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Configure, {
    contact: contact,
    setRoute: setRoute
  }))), h(Route, {
    path: "/invite"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Invite, {
    contact: contact,
    onInvite: onInvite,
    setRoute: setRoute,
    onChange: onChange,
    message: message
  }))), h(Route, {
    path: "/invitee"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Invitee, {
    contact: contact
  }))), h(Route, {
    path: "/inviter"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Inviter, {
    accept_inv_img: accept_inv_img,
    contact: contact,
    onAccept: onAccept,
    onDecline: onDecline,
    setRoute: setRoute
  }))));
}

var mobile = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': PeerToPeerMobile
});

export { mobile as m, useContacts as u };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaWxlLTk5ZGVlNjIxLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9jbGllbnQvaGFuZ291dHMvY29udGFjdHMvc3RhdHVzLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL2NvbnRhY3RzL3VzZUNvbnRhY3RzLmpzIiwiLi4vLi4vLi4vY2xpZW50L2hhbmdvdXRzL3VzZVdlYlNvY2tldC5qcyIsIi4uLy4uLy4uL2NsaWVudC9oYW5nb3V0cy9tb2JpbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHN0YXR1cyA9IHtcclxuICBJTlZJVEVFOiAnSU5WSVRFRScsXHJcbiAgSU5WSVRFUjogJ0lOVklURVInLFxyXG4gIENIQVQ6ICdDSEFUJyxcclxuICBERUNMSU5FRDogJ0RFQ0xJTkVEJyxcclxuICBERUNMSU5FUjogJ0RFQ0xJTkVSJyxcclxuICBCTE9DS0VEOiAnQkxPQ0tFRCcsXHJcbiAgQkxPQ0tFUjogJ0JMT0NLRVInLFxyXG59O1xyXG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZHVjZXIgfSBmcm9tICdwcmVhY3QvaG9va3MnO1xyXG5leHBvcnQgY29uc3QgYWN0aW9uVHlwZXMgPSB7XHJcbiAgRkVUQ0hfQ09OVEFDVFNfU1RBUlRFRDogJ0ZFVENIX0NPTlRBQ1RTX1NUQVJURUQnLFxyXG4gIEZFVENIX0NPTlRBQ1RTX1NVQ0NFU1M6ICdGRVRDSF9DT05UQUNUU19TVUNDRVNTJyxcclxuICBGRVRDSF9DT05UQUNUU19GQUlMRUQ6ICdGRVRDSF9DT05UQUNUU19GQUlMRUQnLFxyXG4gIEdFVF9MT0NBTF9DT05UQUNUUzogJ0dFVF9MT0NBTF9DT05UQUNUUycsXHJcbiAgRklORF9DT05UQUNUOiAnRklORF9DT05UQUNUJyxcclxuICBDT05UQUNUX0lTX09OTElORTogJ0NPTlRBQ1RfSVNfT05MSU5FJyxcclxuICBDT05UQUNUX0lTX09GRkxJTkU6ICdDT05UQUNUX0lTX09GRkxJTkUnLFxyXG4gIENPTlRBQ1RfU1RBVEVfQ0hBTkdFRDogJ0NPTlRBQ1RfU1RBVEVfQ0hBTkdFRCcsXHJcbn07XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaENvbnRhY3RzKHsgZGlzcGF0Y2gsIHVzZXJuYW1lIH0pIHtcclxuICB0cnkge1xyXG4gICAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5GRVRDSF9DT05UQUNUU19TVEFSVEVEIH0pO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2NvbnRhY3RzL2ZpbmQ/dXNlcm5hbWU9JHt1c2VybmFtZX1gKTtcclxuICAgIGNvbnN0IHsgY29udGFjdHMgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLkZFVENIX0NPTlRBQ1RTX1NVQ0NFU1MsIGNvbnRhY3RzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLkZFVENIX0NPTlRBQ1RTX0ZBSUxFRCwgZXJyb3IgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMb2NhbENvbnRhY3RzKHsgZGlzcGF0Y2gsIGNvbnRhY3RzIH0pIHtcclxuICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLkdFVF9MT0NBTF9DT05UQUNUUywgY29udGFjdHMgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmRDb250YWN0KHsgZGlzcGF0Y2gsIGZpbHRlciB9KSB7XHJcbiAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5GSU5EX0NPTlRBQ1QsIGZpbHRlciB9KTtcclxufVxyXG5cclxuY29uc3QgaW5pdFN0YXRlID0ge1xyXG4gIGxvYWRpbmc6IGZhbHNlLFxyXG4gIGVycm9yOiBudWxsLFxyXG4gIGNvbnRhY3RzOiBbXSxcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNvbnRhY3RzUmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7XHJcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xyXG4gICAgY2FzZSBhY3Rpb25UeXBlcy5GRVRDSF9DT05UQUNUU19TVEFSVEVEOlxyXG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9hZGluZzogdHJ1ZSB9O1xyXG4gICAgY2FzZSBhY3Rpb25UeXBlcy5GRVRDSF9DT05UQUNUU19TVUNDRVNTOlxyXG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9hZGluZzogZmFsc2UsIGNvbnRhY3RzOiBhY3Rpb24uY29udGFjdHMgfTtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuRkVUQ0hfQ09OVEFDVFNfRkFJTEVEOlxyXG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9hZGluZzogZmFsc2UsIGVycm9yOiBhY3Rpb24uZXJyb3IgfTtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuRklORF9DT05UQUNUOlxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIGNvbnRhY3RzOiBzdGF0ZS5jb250YWN0cy5maWx0ZXIoKGMpID0+IGMudXNlcm5hbWUgPT09IGFjdGlvbi5maWx0ZXIpLFxyXG4gICAgICB9O1xyXG4gICAgY2FzZSBhY3Rpb25UeXBlcy5HRVRfTE9DQUxfQ09OVEFDVFM6XHJcbiAgICAgIGNvbnN0IG5leHRTdGF0ZSA9IHsgLi4uc3RhdGUsIGNvbnRhY3RzOiBhY3Rpb24uY29udGFjdHMgfTtcclxuXHJcbiAgICAgIHJldHVybiBuZXh0U3RhdGU7XHJcbiAgICBjYXNlIGFjdGlvblR5cGVzLkNPTlRBQ1RfSVNfT05MSU5FOlxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIGNvbnRhY3RzOiBzdGF0ZS5jb250YWN0cy5tYXAoKGMpID0+IHtcclxuICAgICAgICAgIGlmIChjLnVzZXJuYW1lID09PSBhY3Rpb24udXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uYywgb25saW5lOiB0cnVlIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSksXHJcbiAgICAgIH07XHJcbiAgICBjYXNlIGFjdGlvblR5cGVzLkNPTlRBQ1RfSVNfT0ZGTElORTpcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5zdGF0ZSxcclxuICAgICAgICBjb250YWN0czogc3RhdGUuY29udGFjdHMubWFwKChjKSA9PiB7XHJcbiAgICAgICAgICBpZiAoYy51c2VybmFtZSA9PT0gYWN0aW9uLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmMsIG9ubGluZTogZmFsc2UgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSxcclxuICAgICAgfTtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuQ09OVEFDVF9TVEFURV9DSEFOR0VEOlxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIGNvbnRhY3RzOiBzdGF0ZS5jb250YWN0cy5tYXAoKGMpID0+IHtcclxuICAgICAgICAgIGlmIChjLnVzZXJuYW1lID09PSBhY3Rpb24udXNlcm5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgLi4uYywgc3RhdGU6IGFjdGlvbi5zdGF0ZSB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9O1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbnRhY3RzKHsgZmlsdGVyLCB1c2VybmFtZSB9KSB7XHJcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKGNvbnRhY3RzUmVkdWNlciwgaW5pdFN0YXRlKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgY29udGFjdHMtJHt1c2VybmFtZX1gKSkge1xyXG4gICAgICBjb25zdCBzdG9yYWdlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgY29udGFjdHMtJHt1c2VybmFtZX1gKSk7XHJcbiAgICAgIGdldExvY2FsQ29udGFjdHMoeyBkaXNwYXRjaCwgY29udGFjdHM6IHN0b3JhZ2UuY29udGFjdHMgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmZXRjaENvbnRhY3RzKHsgZGlzcGF0Y2gsIHVzZXJuYW1lIH0pO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGZpbHRlciAmJiBmaWx0ZXIubGVuZ3RoID4gMykge1xyXG4gICAgICBmaW5kQ29udGFjdCh7IGRpc3BhdGNoLCBmaWx0ZXIgfSk7XHJcbiAgICB9XHJcbiAgfSwgW2ZpbHRlcl0pO1xyXG5cclxuICByZXR1cm4geyBzdGF0ZSB9O1xyXG59XHJcbiIsImltcG9ydCB7IHVzZVdlYlNvY2tldENvbnRleHQgfSBmcm9tICcuL1dlYlNvY2tldFByb3ZpZGVyJztcclxuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdwcmVhY3QvaG9va3MnO1xyXG5pbXBvcnQgeyBzdGF0dXMgfSBmcm9tICcuL2NvbnRhY3RzL3N0YXR1cyc7XHJcbmltcG9ydCB7IGFjdGlvblR5cGVzIH0gZnJvbSAnLi9jb250YWN0cy91c2VDb250YWN0cyc7XHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VXZWJTb2NrZXQoe3RhcmdldCwgZGlzcGF0Y2ggfSkge1xyXG4gIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCB7IHNvY2tldCB9ID0gdXNlV2ViU29ja2V0Q29udGV4dCgpO1xyXG4gIGZ1bmN0aW9uIG9uSW52aXRlKCkge1xyXG4gICAgZGlzcGF0Y2goe1xyXG4gICAgICB0eXBlOiBhY3Rpb25UeXBlcy5DT05UQUNUX1NUQVRFX0NIQU5HRUQsXHJcbiAgICAgIHVzZXJuYW1lOiB0YXJnZXQsXHJcbiAgICAgIHN0YXRlOiBzdGF0dXMuSU5WSVRFRSxcclxuICAgIH0pO1xyXG4gICAgbGV0IGNvbnRhY3QgPSB7XHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIHN0YXRlOiBzdGF0dXMuSU5WSVRFRSxcclxuICAgICAgdXNlcm5hbWU6IHRhcmdldCxcclxuICAgIH07XHJcblxyXG4gICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoY29udGFjdCkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25BY2NlcHQoKSB7XHJcbiAgICBkaXNwYXRjaCh7XHJcbiAgICAgIHR5cGU6IGFjdGlvblR5cGVzLkNPTlRBQ1RfU1RBVEVfQ0hBTkdFRCxcclxuICAgICAgdXNlcm5hbWU6IHRhcmdldCxcclxuICAgICAgc3RhdGU6IHN0YXR1cy5DSEFULFxyXG4gICAgfSk7XHJcbiAgICBsZXQgY29udGFjdCA9IHtcclxuICAgICAgbWVzc2FnZSxcclxuICAgICAgc3RhdGU6IHN0YXR1cy5DSEFULFxyXG4gICAgICB1c2VybmFtZTogdGFyZ2V0LFxyXG4gICAgfTtcclxuICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGNvbnRhY3QpKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uRGVjbGluZSgpIHtcclxuICAgIGRpc3BhdGNoKHtcclxuICAgICAgdHlwZTogYWN0aW9uVHlwZXMuQ09OVEFDVF9TVEFURV9DSEFOR0VELFxyXG4gICAgICB1c2VybmFtZTogdGFyZ2V0LFxyXG4gICAgICBzdGF0ZTogc3RhdHVzLkRFQ0xJTkVELFxyXG4gICAgfSk7XHJcbiAgICBsZXQgY29udGFjdCA9IHsgc3RhdGU6IHN0YXR1cy5ERUNMSU5FRCwgICB1c2VybmFtZTogdGFyZ2V0IH07XHJcbiAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShjb250YWN0KSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkJsb2NrKCkge1xyXG4gICAgZGlzcGF0Y2goe1xyXG4gICAgICB0eXBlOiBhY3Rpb25UeXBlcy5DT05UQUNUX1NUQVRFX0NIQU5HRUQsXHJcbiAgICAgIHVzZXJuYW1lOiB0YXJnZXQsXHJcbiAgICAgIHN0YXRlOiBzdGF0dXMuQkxPQ0tFRCxcclxuICAgIH0pO1xyXG4gICAgbGV0IGNvbnRhY3QgPSB7IHN0YXRlOiBzdGF0dXMuQkxPQ0tFRCwgIHVzZXJuYW1lOiB0YXJnZXQgfTtcclxuICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGNvbnRhY3QpKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uVW5ibG9jaygpIHtcclxuICAgIGRpc3BhdGNoKHtcclxuICAgICAgdHlwZTogYWN0aW9uVHlwZXMuQ09OVEFDVF9TVEFURV9DSEFOR0VELFxyXG4gICAgICB1c2VybmFtZTogdGFyZ2V0LFxyXG4gICAgICBzdGF0ZTogc3RhdHVzLkNIQVQsXHJcbiAgICB9KTtcclxuICAgIGxldCBjb250YWN0ID0geyBzdGF0ZTogc3RhdHVzLkNIQVQsICAgdXNlcm5hbWU6IHRhcmdldCB9O1xyXG4gICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoY29udGFjdCkgKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcclxuICAgIGNvbnN0IHsgdmFsdWUgfSA9IGUudGFyZ2V0O1xyXG4gICAgc2V0TWVzc2FnZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZW5kTWVzc2FnZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBjb250YWN0ID0ge1xyXG4gICAgICAgIHR5cGU6IGNvbnRhY3RTdGF0dXMuTUVTU0FHRSxcclxuICAgICAgICB1c2VybmFtZTogdGFyZ2V0LFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIH07XHJcbiAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShjb250YWN0KSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnIgPSBlcnJvcjtcclxuICAgICAgZGVidWdnZXI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB7XHJcbiAgICBvbkludml0ZSxcclxuICAgIG9uQWNjZXB0LFxyXG4gICAgb25EZWNsaW5lLFxyXG4gICAgb25CbG9jayxcclxuICAgIG9uVW5ibG9jayxcclxuICAgIG9uQ2hhbmdlLFxyXG4gICAgbWVzc2FnZSxcclxuICAgIHNlbmRNZXNzYWdlLFxyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IFN1c3BlbnNlLCBsYXp5IH0gZnJvbSAncHJlYWN0L2NvbXBhdCc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7IFJvdXRlLCB1c2VSb3V0ZUNvbnRleHQgfSBmcm9tICcuLi9yb3V0ZS9yb3V0ZXInO1xyXG5pbXBvcnQgeyB1c2VDb250YWN0c0NvbnRleHQgfSBmcm9tICcuL2NvbnRhY3RzL2NvbnRhY3QtY29udGV4dCc7XHJcbmltcG9ydCB7IHVzZUFwcENvbnRleHQgfSBmcm9tICcuLi9hcHAtY29udGV4dC9hcHAtY29udGV4dCc7XHJcbmltcG9ydCB7IHVzZUF1dGhDb250ZXh0IH0gZnJvbSAnLi4vYXV0aC9hdXRoLWNvbnRleHQnO1xyXG5pbXBvcnQgeyB1c2VXZWJTb2NrZXQgfSBmcm9tICcuL3VzZVdlYlNvY2tldCc7XHJcbmNvbnN0IENvbnRhY3RzID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vY29udGFjdHMvQ29udGFjdHMnKSk7XHJcbmNvbnN0IEJsb2NrID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vdmlld3MvQmxvY2snKSk7XHJcbmNvbnN0IEJsb2NrZWQgPSBsYXp5KCgpID0+IGltcG9ydCgnLi92aWV3cy9CbG9ja2VkJykpO1xyXG5jb25zdCBDaGF0ID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vdmlld3MvQ2hhdCcpKTtcclxuY29uc3QgQ29uZmlndXJlID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vdmlld3MvQ29uZmlndXJlJykpO1xyXG5jb25zdCBJbnZpdGUgPSBsYXp5KCgpID0+IGltcG9ydCgnLi92aWV3cy9JbnZpdGUnKSk7XHJcbmNvbnN0IEludml0ZWUgPSBsYXp5KCgpID0+IGltcG9ydCgnLi92aWV3cy9JbnZpdGVlJykpO1xyXG5jb25zdCBJbnZpdGVyID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vdmlld3MvSW52aXRlcicpKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBlZXJUb1BlZXJNb2JpbGUoKSB7XHJcbiAgY29uc3QgYXV0aENvbnRleHQgPSB1c2VBdXRoQ29udGV4dCgpO1xyXG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlQ29udGFjdHNDb250ZXh0KCk7XHJcbiAgY29uc3QgW3JvdXRlLCBzZXRSb3V0ZV0gPSB1c2VSb3V0ZUNvbnRleHQoKTtcclxuICBjb25zdCB7IGNvbnRhY3QgfSA9IHN0YXRlO1xyXG4gIGNvbnN0IHsgdXNlcm5hbWUgfSA9IGF1dGhDb250ZXh0LnN0YXRlO1xyXG4gIGNvbnN0IHsgYWNjZXB0X2ludl9pbWcgfSA9IHVzZUFwcENvbnRleHQoKTtcclxuICBjb25zdCB7XHJcbiAgICBvbkludml0ZSxcclxuICAgIG9uQWNjZXB0LFxyXG4gICAgb25CbG9jayxcclxuICAgIG9uVW5ibG9jayxcclxuICAgIG9uRGVjbGluZSxcclxuICAgIG9uQ2hhbmdlLFxyXG4gICAgbWVzc2FnZSxcclxuICAgIHNlbmRNZXNzYWdlLFxyXG4gIH0gPSB1c2VXZWJTb2NrZXQoeyB1c2VybmFtZSwgdGFyZ2V0OiBjb250YWN0ICYmIGNvbnRhY3QudXNlcm5hbWUsIGRpc3BhdGNoIH0pO1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoY29udGFjdCkge1xyXG4gICAgICBzZXRSb3V0ZShgLyR7Y29udGFjdC5zdGF0ZX1gKTtcclxuICAgIH1cclxuICB9LCBbY29udGFjdF0pO1xyXG5cclxuICBmdW5jdGlvbiBvblNldHRpbmcoKSB7XHJcbiAgICBzZXRSb3V0ZSgnL2NvZmlndXJlJyk7XHJcbiAgfVxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IHN0eWxlPXt7IGhlaWdodDogJzg1dmgnIH19PlxyXG4gICAgICA8Um91dGUgcGF0aD0nL2NvbnRhY3RzJz5cclxuICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXY+bG9hZGluZy4uLjwvZGl2Pn0+XHJcbiAgICAgICAgICA8Q29udGFjdHMgLz5cclxuICAgICAgICA8L1N1c3BlbnNlPlxyXG4gICAgICA8L1JvdXRlPlxyXG5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9ibG9jayc+XHJcbiAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmxvYWRpbmcuLi48L2Rpdj59PlxyXG4gICAgICAgICAgPEJsb2NrIGNvbnRhY3Q9e2NvbnRhY3R9IG9uQmxvY2s9e29uQmxvY2t9IHNldFJvdXRlPXtzZXRSb3V0ZX0gLz5cclxuICAgICAgICA8L1N1c3BlbnNlPlxyXG4gICAgICA8L1JvdXRlPlxyXG4gICAgICA8Um91dGUgcGF0aD0nL2Jsb2NrZWQnPlxyXG4gICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5sb2FkaW5nLi4uPC9kaXY+fT5cclxuICAgICAgICAgIDxCbG9ja2VkXHJcbiAgICAgICAgICAgIGNvbnRhY3Q9e2NvbnRhY3R9XHJcbiAgICAgICAgICAgIG9uVW5ibG9jaz17b25VbmJsb2NrfVxyXG4gICAgICAgICAgICBzZXRSb3V0ZT17c2V0Um91dGV9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvU3VzcGVuc2U+XHJcbiAgICAgIDwvUm91dGU+XHJcbiAgICAgIDxSb3V0ZSBwYXRoPScvYWNjZXB0ZWQnPlxyXG4gICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5sb2FkaW5nLi4uPC9kaXY+fT5cclxuICAgICAgICAgIDxDaGF0XHJcbiAgICAgICAgICAgIGNvbnRhY3Q9e2NvbnRhY3R9XHJcbiAgICAgICAgICAgIG9uU2V0dGluZz17b25TZXR0aW5nfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XHJcbiAgICAgICAgICAgIG1lc3NhZ2U9e21lc3NhZ2V9XHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlPXtzZW5kTWVzc2FnZX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9TdXNwZW5zZT5cclxuICAgICAgPC9Sb3V0ZT5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9jb2ZpZ3VyZSc+XHJcbiAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmxvYWRpbmcuLi48L2Rpdj59PlxyXG4gICAgICAgICAgPENvbmZpZ3VyZSBjb250YWN0PXtjb250YWN0fSBzZXRSb3V0ZT17c2V0Um91dGV9IC8+XHJcbiAgICAgICAgPC9TdXNwZW5zZT5cclxuICAgICAgPC9Sb3V0ZT5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9pbnZpdGUnPlxyXG4gICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5sb2FkaW5nLi4uPC9kaXY+fT5cclxuICAgICAgICAgIDxJbnZpdGVcclxuICAgICAgICAgICAgY29udGFjdD17Y29udGFjdH1cclxuICAgICAgICAgICAgb25JbnZpdGU9e29uSW52aXRlfVxyXG4gICAgICAgICAgICBzZXRSb3V0ZT17c2V0Um91dGV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cclxuICAgICAgICAgICAgbWVzc2FnZT17bWVzc2FnZX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9TdXNwZW5zZT5cclxuICAgICAgPC9Sb3V0ZT5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9pbnZpdGVlJz5cclxuICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXY+bG9hZGluZy4uLjwvZGl2Pn0+XHJcbiAgICAgICAgICA8SW52aXRlZSBjb250YWN0PXtjb250YWN0fSAvPlxyXG4gICAgICAgIDwvU3VzcGVuc2U+XHJcbiAgICAgIDwvUm91dGU+XHJcbiAgICAgIDxSb3V0ZSBwYXRoPScvaW52aXRlcic+XHJcbiAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmxvYWRpbmcuLi48L2Rpdj59PlxyXG4gICAgICAgICAgPEludml0ZXJcclxuICAgICAgICAgICAgYWNjZXB0X2ludl9pbWc9e2FjY2VwdF9pbnZfaW1nfVxyXG4gICAgICAgICAgICBjb250YWN0PXtjb250YWN0fVxyXG4gICAgICAgICAgICBvbkFjY2VwdD17b25BY2NlcHR9XHJcbiAgICAgICAgICAgIG9uRGVjbGluZT17b25EZWNsaW5lfVxyXG4gICAgICAgICAgICBzZXRSb3V0ZT17c2V0Um91dGV9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvU3VzcGVuc2U+XHJcbiAgICAgIDwvUm91dGU+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzdGF0dXMiLCJJTlZJVEVFIiwiSU5WSVRFUiIsIkNIQVQiLCJERUNMSU5FRCIsIkRFQ0xJTkVSIiwiQkxPQ0tFRCIsIkJMT0NLRVIiLCJhY3Rpb25UeXBlcyIsIkZFVENIX0NPTlRBQ1RTX1NUQVJURUQiLCJGRVRDSF9DT05UQUNUU19TVUNDRVNTIiwiRkVUQ0hfQ09OVEFDVFNfRkFJTEVEIiwiR0VUX0xPQ0FMX0NPTlRBQ1RTIiwiRklORF9DT05UQUNUIiwiQ09OVEFDVF9JU19PTkxJTkUiLCJDT05UQUNUX0lTX09GRkxJTkUiLCJDT05UQUNUX1NUQVRFX0NIQU5HRUQiLCJmZXRjaENvbnRhY3RzIiwiZGlzcGF0Y2giLCJ1c2VybmFtZSIsInR5cGUiLCJyZXNwb25zZSIsImZldGNoIiwiY29udGFjdHMiLCJqc29uIiwiZXJyb3IiLCJnZXRMb2NhbENvbnRhY3RzIiwiZmluZENvbnRhY3QiLCJmaWx0ZXIiLCJpbml0U3RhdGUiLCJsb2FkaW5nIiwiY29udGFjdHNSZWR1Y2VyIiwic3RhdGUiLCJhY3Rpb24iLCJjIiwibmV4dFN0YXRlIiwibWFwIiwib25saW5lIiwidXNlQ29udGFjdHMiLCJ1c2VSZWR1Y2VyIiwidXNlRWZmZWN0IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsZW5ndGgiLCJ1c2VXZWJTb2NrZXQiLCJ0YXJnZXQiLCJtZXNzYWdlIiwic2V0TWVzc2FnZSIsInVzZVN0YXRlIiwic29ja2V0IiwidXNlV2ViU29ja2V0Q29udGV4dCIsIm9uSW52aXRlIiwiY29udGFjdCIsInNlbmQiLCJzdHJpbmdpZnkiLCJvbkFjY2VwdCIsIm9uRGVjbGluZSIsIm9uQmxvY2siLCJvblVuYmxvY2siLCJvbkNoYW5nZSIsImUiLCJ2YWx1ZSIsInNlbmRNZXNzYWdlIiwiY29udGFjdFN0YXR1cyIsIk1FU1NBR0UiLCJDb250YWN0cyIsImxhenkiLCJCbG9jayIsIkJsb2NrZWQiLCJDaGF0IiwiQ29uZmlndXJlIiwiSW52aXRlIiwiSW52aXRlZSIsIkludml0ZXIiLCJQZWVyVG9QZWVyTW9iaWxlIiwiYXV0aENvbnRleHQiLCJ1c2VBdXRoQ29udGV4dCIsInVzZUNvbnRhY3RzQ29udGV4dCIsInJvdXRlIiwic2V0Um91dGUiLCJ1c2VSb3V0ZUNvbnRleHQiLCJhY2NlcHRfaW52X2ltZyIsInVzZUFwcENvbnRleHQiLCJvblNldHRpbmciLCJoZWlnaHQiLCJTdXNwZW5zZSJdLCJtYXBwaW5ncyI6Ijs7O0FBQU8sTUFBTUEsTUFBTSxHQUFHO0FBQ3BCQyxFQUFBQSxPQUFPLEVBQUUsU0FEVztBQUVwQkMsRUFBQUEsT0FBTyxFQUFFLFNBRlc7QUFHcEJDLEVBQUFBLElBQUksRUFBRSxNQUhjO0FBSXBCQyxFQUFBQSxRQUFRLEVBQUUsVUFKVTtBQUtwQkMsRUFBQUEsUUFBUSxFQUFFLFVBTFU7QUFNcEJDLEVBQUFBLE9BQU8sRUFBRSxTQU5XO0FBT3BCQyxFQUFBQSxPQUFPLEVBQUU7QUFQVyxDQUFmOztBQ0NBLE1BQU1DLFdBQVcsR0FBRztBQUN6QkMsRUFBQUEsc0JBQXNCLEVBQUUsd0JBREM7QUFFekJDLEVBQUFBLHNCQUFzQixFQUFFLHdCQUZDO0FBR3pCQyxFQUFBQSxxQkFBcUIsRUFBRSx1QkFIRTtBQUl6QkMsRUFBQUEsa0JBQWtCLEVBQUUsb0JBSks7QUFLekJDLEVBQUFBLFlBQVksRUFBRSxjQUxXO0FBTXpCQyxFQUFBQSxpQkFBaUIsRUFBRSxt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
