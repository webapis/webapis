import { u as useContactsContext, b as useRouteContext, a as useMediaQuery, p, h, e as useAuthContext, m, U, D as Route, L } from './index-a411af46.js';
import { B as Button } from './Button-2f3797f9.js';

function PeerToPeerMobileContext({
  children
}) {
  const [state, dispatch] = useContactsContext();
  const [route, setRoute] = useRouteContext();
  const {
    width
  } = useMediaQuery();
  const {
    contact
  } = state;
  p(() => {
    if (width < 800) {
      if (contact && contact.room) {
        debugger;
        setRoute('/p2p-chat');
      } else if (contact && !contact.room) {
        setRoute('/invitation');
      } else {
        setRoute('/contacts');
      }
    }
  }, [contact]);
  return children;
}

var actionTypes = {
  SEND_INVITATION_STARTED: 'SEND_INVITATION_STARTED',
  SEND_INVITATION_SUCCESS: 'SEND_INVITATION_SUCCESS',
  SEND_INVITATION_FAILED: 'SEND_INVITATION_FAILED',
  VALUE_CHANGED: 'VALUE_CHANGED'
};

const initState = {
  loading: false,
  invitations: [],
  error: null,
  message: 'Lest chat on Webcom'
};
function invitationReducer(state, action) {
  switch (action.type) {
    case actionTypes.SEND_INVITATION_STARTED:
      return { ...state,
        loading: true
      };

    case actionTypes.SEND_INVITATION_SUCCESS:
      return { ...state,
        loading: false,
        invitations: [...state.invitations, action.invitation]
      };

    case actionTypes.SEND_INVITATION_FAILED:
      return { ...state,
        loading: false,
        error: action.error
      };

    case actionTypes.VALUE_CHANGED:
      return { ...state,
        message: action.value
      };

    default:
      return state;
  }
}

async function sendInvitation({
  dispatch,
  message,
  token,
  target
}) {
  try {
    dispatch({
      type: actionTypes.SEND_INVITATION_STARTED
    });
    const response = await fetch('/invitation/insertOne', {
      headers: {
        'Conten-Type': 'application/json',
        'Access-Control-Allow-Headers': '*',
        Authorization: `Bearer ${btoa(`${token}`)}`
      },
      method: 'post',
      body: JSON.stringify({
        target,
        message
      })
    });
    const {
      invation
    } = await response.json();
    dispatch({
      type: actionTypes.SEND_INVITATION_SUCCESS,
      invation
    });
  } catch (error) {
    dispatch({
      type: actionTypes.SEND_INVITATION_FAILED,
      error
    });
  }
}
function valueChanged({
  dispatch,
  value
}) {
  dispatch({
    type: actionTypes.VALUE_CHANGED,
    value
  });
} ///

function PersonAddIcon({
  height = 24,
  width = 24
}) {
  return h("svg", {
    height: height,
    viewBox: "0 0 24 24",
    width: width
  }, h("path", {
    d: "M0 0h24v24H0z",
    fill: "none"
  }), h("path", {
    d: "M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
  }));
}

function Invitation({
  invitation
}) {
  const {
    state: authState
  } = useAuthContext();
  const [state, dispatch] = m(invitationReducer, initState);
  const {
    message
  } = state;

  function handleChange(e) {
    valueChanged({
      dispatch,
      value: e.target.value
    });
  }

  function handleSendInvitation() {
    const {
      token
    } = authState;
    const {
      username
    } = invitation;
    sendInvitation({
      dispatch,
      message,
      token,
      target: username
    });
  }

  return h("div", {
    "data-testid": "invitation"
  }, ' ', h(PersonAddIcon, {
    height: 50,
    width: 50
  }), h("p", null, "Start conversation with ", h("i", null, invitation.email), ' '), h("textarea", {
    rows: "3",
    cols: "50",
    onChange: handleChange,
    value: message
  }), h(Button, {
    id: "send-invitation-btn",
    title: "Send Invite",
    onClick: handleSendInvitation
  }), ' ');
}

function PeerToPeerInvitationMobile({
  invitation
}) {
  return h("div", {
    "data-testid": "p2p-invitation-mobile"
  }, h(Invitation, {
    invitation: invitation
  }));
}

function Messaging() {
  return h("div", null, "Messaging");
}

const Contacts = L(() => import('./Contacts-8c832609.js'));
const PeerToPeerChat = L(() => import('./p2p-chat-mobile-ad16a1b1.js'));
function PeerToPeerMobile() {
  const [state, dispatch] = useContactsContext();
  const [route, setRoute] = useRouteContext();
  const {
    contact
  } = state;
  const {
    width
  } = useMediaQuery();
  p(() => {
    if (width < 800) {
      setRoute('/contacts');
    }
  }, []);
  return h(PeerToPeerMobileContext, null, h(Route, {
    path: "/contacts"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Contacts, null))), h(Route, {
    path: "/invitation"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(PeerToPeerInvitationMobile, {
    invitation: contact
  }))), h(Route, {
    path: "/messaging"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Messaging, null))), h(Route, {
    path: "/p2p-chat"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(PeerToPeerChat, {
    chat: contact
  }))));
}

export default PeerToPeerMobile;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicDJwLW1vYmlsZS1hYzFhMTI4NC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vY2xpZW50L3AycC9tb2JpbGUvcDJwLW1vYmlsZS1jb250ZXh0LmpzIiwiLi4vLi4vLi4vY2xpZW50L2ludml0YXRpb24vYWN0aW9uVHlwZXMuanMiLCIuLi8uLi8uLi9jbGllbnQvaW52aXRhdGlvbi9pbnZpdGF0aW9uUmVkdWNlci5qcyIsIi4uLy4uLy4uL2NsaWVudC9pbnZpdGF0aW9uL2FjdGlvbnMuanMiLCIuLi8uLi8uLi9jbGllbnQvbGF5b3V0L2ljb25zL1BlcnNvbkFkZC5qcyIsIi4uLy4uLy4uL2NsaWVudC9pbnZpdGF0aW9uL0ludml0YXRpb24uanMiLCIuLi8uLi8uLi9jbGllbnQvcDJwL21vYmlsZS9wMnAtaW52aXRhdGlvbi1tb2JpbGUuanMiLCIuLi8uLi8uLi9jbGllbnQvbWVzc2FnaW5nL01lc3NhZ2luZy5qcyIsIi4uLy4uLy4uL2NsaWVudC9wMnAvbW9iaWxlL3AycC1tb2JpbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7XHJcbiAgdXNlQ29udGFjdHNDb250ZXh0XHJcbn0gZnJvbSAnLi4vLi4vY29udGFjdHMvY29udGFjdC1jb250ZXh0JztcclxuaW1wb3J0IHsgdXNlTWVkaWFRdWVyeSB9IGZyb20gJy4uLy4uL2xheW91dC91c2VNZWRpYVF1ZXJ5JztcclxuaW1wb3J0IHsgdXNlUm91dGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vcm91dGUvcm91dGVyJztcclxuZXhwb3J0IGZ1bmN0aW9uIFBlZXJUb1BlZXJNb2JpbGVDb250ZXh0KHsgY2hpbGRyZW4gfSkge1xyXG5cclxuICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZUNvbnRhY3RzQ29udGV4dCgpO1xyXG4gIGNvbnN0IFtyb3V0ZSwgc2V0Um91dGVdID0gdXNlUm91dGVDb250ZXh0KCk7XHJcbiAgY29uc3QgeyB3aWR0aCB9ID0gdXNlTWVkaWFRdWVyeSgpO1xyXG4gIGNvbnN0IHsgY29udGFjdCB9ID0gc3RhdGU7XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICh3aWR0aCA8IDgwMCkge1xyXG4gICAgICBpZiAoY29udGFjdCAmJiBjb250YWN0LnJvb20pIHtcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICBzZXRSb3V0ZSgnL3AycC1jaGF0Jyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoY29udGFjdCAmJiAhY29udGFjdC5yb29tKSB7XHJcbiAgICAgICAgc2V0Um91dGUoJy9pbnZpdGF0aW9uJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0Um91dGUoJy9jb250YWN0cycpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2NvbnRhY3RdKTtcclxuXHJcblxyXG5cclxuICByZXR1cm4gY2hpbGRyZW47XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gIFNFTkRfSU5WSVRBVElPTl9TVEFSVEVEOiAnU0VORF9JTlZJVEFUSU9OX1NUQVJURUQnLFxyXG4gIFNFTkRfSU5WSVRBVElPTl9TVUNDRVNTOiAnU0VORF9JTlZJVEFUSU9OX1NVQ0NFU1MnLFxyXG4gIFNFTkRfSU5WSVRBVElPTl9GQUlMRUQ6ICdTRU5EX0lOVklUQVRJT05fRkFJTEVEJyxcclxuICBWQUxVRV9DSEFOR0VEOiAnVkFMVUVfQ0hBTkdFRCcsXHJcbn07XHJcbiIsImltcG9ydCBhY3Rpb25UeXBlcyBmcm9tICcuL2FjdGlvblR5cGVzJztcclxuZXhwb3J0IGNvbnN0IGluaXRTdGF0ZSA9IHtcclxuICBsb2FkaW5nOiBmYWxzZSxcclxuICBpbnZpdGF0aW9uczogW10sXHJcbiAgZXJyb3I6IG51bGwsXHJcbiAgbWVzc2FnZTogJ0xlc3QgY2hhdCBvbiBXZWJjb20nLFxyXG59O1xyXG5leHBvcnQgZnVuY3Rpb24gaW52aXRhdGlvblJlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xyXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuU0VORF9JTlZJVEFUSU9OX1NUQVJURUQ6XHJcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBsb2FkaW5nOiB0cnVlIH07XHJcbiAgICBjYXNlIGFjdGlvblR5cGVzLlNFTkRfSU5WSVRBVElPTl9TVUNDRVNTOlxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnN0YXRlLFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGludml0YXRpb25zOiBbLi4uc3RhdGUuaW52aXRhdGlvbnMsIGFjdGlvbi5pbnZpdGF0aW9uXSxcclxuICAgICAgfTtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuU0VORF9JTlZJVEFUSU9OX0ZBSUxFRDpcclxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogYWN0aW9uLmVycm9yIH07XHJcbiAgICBjYXNlIGFjdGlvblR5cGVzLlZBTFVFX0NIQU5HRUQ6XHJcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBtZXNzYWdlOiBhY3Rpb24udmFsdWUgfTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBzdGF0ZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IGFjdGlvblR5cGVzIGZyb20gJy4vYWN0aW9uVHlwZXMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRJbnZpdGF0aW9uKHsgZGlzcGF0Y2gsIG1lc3NhZ2UsIHRva2VuLCB0YXJnZXQgfSkge1xyXG5cclxuICB0cnkge1xyXG4gICAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5TRU5EX0lOVklUQVRJT05fU1RBUlRFRCB9KTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9pbnZpdGF0aW9uL2luc2VydE9uZScsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW4tVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICcqJyxcclxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YnRvYShgJHt0b2tlbn1gKX1gLFxyXG4gICAgICB9LFxyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0YXJnZXQsIG1lc3NhZ2UgfSksXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHsgaW52YXRpb24gfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLlNFTkRfSU5WSVRBVElPTl9TVUNDRVNTLCBpbnZhdGlvbiB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuIFxyXG4gICAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5TRU5EX0lOVklUQVRJT05fRkFJTEVELCBlcnJvciB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZUNoYW5nZWQoeyBkaXNwYXRjaCwgdmFsdWUgfSkge1xyXG4gIGRpc3BhdGNoKHsgdHlwZTogYWN0aW9uVHlwZXMuVkFMVUVfQ0hBTkdFRCwgdmFsdWUgfSk7XHJcbn1cclxuLy8vXHJcbiIsImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQZXJzb25BZGRJY29uKHsgaGVpZ2h0ID0gMjQsIHdpZHRoID0gMjQgfSkge1xyXG4gIHJldHVybiAoXHJcbiAgICA8c3ZnIGhlaWdodD17aGVpZ2h0fSB2aWV3Qm94PScwIDAgMjQgMjQnIHdpZHRoPXt3aWR0aH0+XHJcbiAgICAgIDxwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnIC8+XHJcbiAgICAgIDxwYXRoIGQ9J00xNSAxMmMyLjIxIDAgNC0xLjc5IDQtNHMtMS43OS00LTQtNC00IDEuNzktNCA0IDEuNzkgNCA0IDR6bS05LTJWN0g0djNIMXYyaDN2M2gydi0zaDN2LTJINnptOSA0Yy0yLjY3IDAtOCAxLjM0LTggNHYyaDE2di0yYzAtMi42Ni01LjMzLTQtOC00eicgLz5cclxuICAgIDwvc3ZnPlxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IHVzZVJlZHVjZXIgfSBmcm9tICdwcmVhY3QvaG9va3MnO1xyXG5pbXBvcnQgeyBpbnZpdGF0aW9uUmVkdWNlciwgaW5pdFN0YXRlIH0gZnJvbSAnLi9pbnZpdGF0aW9uUmVkdWNlcic7XHJcbmltcG9ydCB7IHNlbmRJbnZpdGF0aW9uLCB2YWx1ZUNoYW5nZWQgfSBmcm9tICcuL2FjdGlvbnMnO1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2Zvcm0vQnV0dG9uJztcclxuaW1wb3J0IFBlcnNvbkFkZEljb24gZnJvbSAnLi4vbGF5b3V0L2ljb25zL1BlcnNvbkFkZCc7XHJcbmltcG9ydCB7IHVzZUF1dGhDb250ZXh0IH0gZnJvbSAnLi4vYXV0aC9hdXRoLWNvbnRleHQnO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbnZpdGF0aW9uKHsgaW52aXRhdGlvbiB9KSB7XHJcbiAgY29uc3QgeyBzdGF0ZTogYXV0aFN0YXRlIH0gPSB1c2VBdXRoQ29udGV4dCgpO1xyXG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihpbnZpdGF0aW9uUmVkdWNlciwgaW5pdFN0YXRlKTtcclxuICBjb25zdCB7IG1lc3NhZ2UgfSA9IHN0YXRlO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkge1xyXG4gICAgdmFsdWVDaGFuZ2VkKHsgZGlzcGF0Y2gsIHZhbHVlOiBlLnRhcmdldC52YWx1ZSB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZVNlbmRJbnZpdGF0aW9uKCkge1xyXG4gICAgY29uc3QgeyB0b2tlbiB9ID0gYXV0aFN0YXRlO1xyXG4gICAgY29uc3QgeyB1c2VybmFtZSB9ID0gaW52aXRhdGlvbjtcclxuICBcclxuICAgIHNlbmRJbnZpdGF0aW9uKHsgZGlzcGF0Y2gsIG1lc3NhZ2UsIHRva2VuLCB0YXJnZXQ6IHVzZXJuYW1lIH0pO1xyXG4gIH1cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBkYXRhLXRlc3RpZD0naW52aXRhdGlvbic+XHJcbiAgICAgIHsnICd9XHJcbiAgICAgIDxQZXJzb25BZGRJY29uIGhlaWdodD17NTB9IHdpZHRoPXs1MH0gLz5cclxuICAgICAgPHA+XHJcbiAgICAgICAgU3RhcnQgY29udmVyc2F0aW9uIHdpdGggPGk+e2ludml0YXRpb24uZW1haWx9PC9pPnsnICd9XHJcbiAgICAgIDwvcD5cclxuICAgICAgPHRleHRhcmVhIHJvd3M9JzMnIGNvbHM9JzUwJyBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSB2YWx1ZT17bWVzc2FnZX0gLz5cclxuICAgICAgPEJ1dHRvbiBpZD1cInNlbmQtaW52aXRhdGlvbi1idG5cIiB0aXRsZT0nU2VuZCBJbnZpdGUnIG9uQ2xpY2s9e2hhbmRsZVNlbmRJbnZpdGF0aW9ufSAvPnsnICd9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xyXG5pbXBvcnQgSW52aXRhdGlvbiBmcm9tICcuLi8uLi9pbnZpdGF0aW9uL0ludml0YXRpb24nO1xyXG5leHBvcnQgZnVuY3Rpb24gUGVlclRvUGVlckludml0YXRpb25Nb2JpbGUoeyBpbnZpdGF0aW9uIH0pIHtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBkYXRhLXRlc3RpZD0ncDJwLWludml0YXRpb24tbW9iaWxlJz5cclxuICAgICAgPEludml0YXRpb24gaW52aXRhdGlvbj17aW52aXRhdGlvbn0gLz5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZXNzYWdpbmcoKSB7XHJcbiAgcmV0dXJuIDxkaXY+TWVzc2FnaW5nPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCB7IGggfSBmcm9tICdwcmVhY3QnO1xyXG5pbXBvcnQgeyBTdXNwZW5zZSwgbGF6eSB9IGZyb20gJ3ByZWFjdC9jb21wYXQnO1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdwcmVhY3QvaG9va3MnO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZUNvbnRleHQgfSBmcm9tICcuLi8uLi9yb3V0ZS9yb3V0ZXInO1xyXG5pbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSAnLi4vLi4vbGF5b3V0L3VzZU1lZGlhUXVlcnknO1xyXG5pbXBvcnQgeyBSb3V0ZSB9IGZyb20gJy4uLy4uL3JvdXRlL3JvdXRlcic7XHJcbmltcG9ydCB7IFBlZXJUb1BlZXJNb2JpbGVDb250ZXh0IH0gZnJvbSAnLi9wMnAtbW9iaWxlLWNvbnRleHQnO1xyXG5pbXBvcnQgeyBQZWVyVG9QZWVySW52aXRhdGlvbk1vYmlsZSB9IGZyb20gJy4vcDJwLWludml0YXRpb24tbW9iaWxlJztcclxuaW1wb3J0IE1lc3NhZ2luZyBmcm9tICcuLi8uLi9tZXNzYWdpbmcvTWVzc2FnaW5nJztcclxuaW1wb3J0IHsgdXNlQ29udGFjdHNDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGFjdHMvY29udGFjdC1jb250ZXh0JztcclxuY29uc3QgQ29udGFjdHMgPSBsYXp5KCgpID0+IGltcG9ydCgnLi4vLi4vY29udGFjdHMvQ29udGFjdHMnKSk7XHJcbmNvbnN0IFBlZXJUb1BlZXJDaGF0ID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vcDJwLWNoYXQtbW9iaWxlJykpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGVlclRvUGVlck1vYmlsZSgpIHtcclxuICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZUNvbnRhY3RzQ29udGV4dCgpO1xyXG4gIGNvbnN0IFtyb3V0ZSwgc2V0Um91dGVdID0gdXNlUm91dGVDb250ZXh0KCk7XHJcbiAgY29uc3QgeyBjb250YWN0IH0gPSBzdGF0ZTtcclxuICBjb25zdCB7IHdpZHRoIH0gPSB1c2VNZWRpYVF1ZXJ5KCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAod2lkdGggPCA4MDApIHtcclxuICAgICAgc2V0Um91dGUoJy9jb250YWN0cycpO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxQZWVyVG9QZWVyTW9iaWxlQ29udGV4dD5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9jb250YWN0cyc+XHJcbiAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmxvYWRpbmcuLi48L2Rpdj59PlxyXG4gICAgICAgICAgPENvbnRhY3RzIC8+XHJcbiAgICAgICAgPC9TdXNwZW5zZT5cclxuICAgICAgPC9Sb3V0ZT5cclxuXHJcbiAgICAgIDxSb3V0ZSBwYXRoPScvaW52aXRhdGlvbic+XHJcbiAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmxvYWRpbmcuLi48L2Rpdj59PlxyXG4gICAgICAgICAgPFBlZXJUb1BlZXJJbnZpdGF0aW9uTW9iaWxlIGludml0YXRpb249e2NvbnRhY3R9IC8+XHJcbiAgICAgICAgPC9TdXNwZW5zZT5cclxuICAgICAgPC9Sb3V0ZT5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9tZXNzYWdpbmcnPlxyXG4gICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5sb2FkaW5nLi4uPC9kaXY+fT5cclxuICAgICAgICAgIDxNZXNzYWdpbmcgLz5cclxuICAgICAgICA8L1N1c3BlbnNlPlxyXG4gICAgICA8L1JvdXRlPlxyXG4gICAgICA8Um91dGUgcGF0aD0nL3AycC1jaGF0Jz5cclxuICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXY+bG9hZGluZy4uLjwvZGl2Pn0+XHJcbiAgICAgICAgICA8UGVlclRvUGVlckNoYXQgY2hhdD17Y29udGFjdH0gLz5cclxuICAgICAgICA8L1N1c3BlbnNlPlxyXG4gICAgICA8L1JvdXRlPlxyXG4gICAgPC9QZWVyVG9QZWVyTW9iaWxlQ29udGV4dD5cclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJQZWVyVG9QZWVyTW9iaWxlQ29udGV4dCIsImNoaWxkcmVuIiwic3RhdGUiLCJkaXNwYXRjaCIsInVzZUNvbnRhY3RzQ29udGV4dCIsInJvdXRlIiwic2V0Um91dGUiLCJ1c2VSb3V0ZUNvbnRleHQiLCJ3aWR0aCIsInVzZU1lZGlhUXVlcnkiLCJjb250YWN0IiwidXNlRWZmZWN0Iiwicm9vbSIsIlNFTkRfSU5WSVRBVElPTl9TVEFSVEVEIiwiU0VORF9JTlZJVEFUSU9OX1NVQ0NFU1MiLCJTRU5EX0lOVklUQVRJT05fRkFJTEVEIiwiVkFMVUVfQ0hBTkdFRCIsImluaXRTdGF0ZSIsImxvYWRpbmciLCJpbnZpdGF0aW9ucyIsImVycm9yIiwibWVzc2FnZSIsImludml0YXRpb25SZWR1Y2VyIiwiYWN0aW9uIiwidHlwZSIsImFjdGlvblR5cGVzIiwiaW52aXRhdGlvbiIsInZhbHVlIiwic2VuZEludml0YXRpb24iLCJ0b2tlbiIsInRhcmdldCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJ0b2EiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImludmF0aW9uIiwianNvbiIsInZhbHVlQ2hhbmdlZCIsIlBlcnNvbkFkZEljb24iLCJoZWlnaHQiLCJJbnZpdGF0aW9uIiwiYXV0aFN0YXRlIiwidXNlQXV0aENvbnRleHQiLCJ1c2VSZWR1Y2VyIiwiaGFuZGxlQ2hhbmdlIiwiZSIsImhhbmRsZVNlbmRJbnZpdGF0aW9uIiwidXNlcm5hbWUiLCJlbWFpbCIsIlBlZXJUb1BlZXJJbnZpdGF0aW9uTW9iaWxlIiwiTWVzc2FnaW5nIiwiQ29udGFjdHMiLCJsYXp5IiwiUGVlclRvUGVlckNoYXQiLCJQZWVyVG9QZWVyTW9iaWxlIiwiU3VzcGVuc2UiXSwibWFwcGluZ3MiOiI7OztBQU9PLFNB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
