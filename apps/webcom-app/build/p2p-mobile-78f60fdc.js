import { u as useContactsContext, b as useRouteContext, a as useMediaQuery, p, h, e as useAuthContext, m, U, E as Route, L } from './index-23ecf83f.js';
import { B as Button } from './Button-27509646.js';

function PeerToPeerMobileContext({
  children
}) {
  const [state, dispatch] = useContactsContext();
  const [route, setRoute] = useRouteContext();
  const {
    width
  } = useMediaQuery();
  const {
    contact
  } = state;
  p(() => {
    if (width < 800) {
      if (contact && contact.room) {
        debugger;
        setRoute('/p2p-chat');
      } else if (contact && !contact.room) {
        setRoute('/invitation');
      } else {
        setRoute('/contacts');
      }
    }
  }, [contact]);
  return children;
}

var actionTypes = {
  SEND_INVITATION_STARTED: 'SEND_INVITATION_STARTED',
  SEND_INVITATION_SUCCESS: 'SEND_INVITATION_SUCCESS',
  SEND_INVITATION_FAILED: 'SEND_INVITATION_FAILED',
  VALUE_CHANGED: 'VALUE_CHANGED',
  WS_INVITATION_INITIATED: 'WS_INVITATION_INITIATED',
  WS_INVITATION_DELIVERED: 'WS_INVITATION_DELIVERED',
  WS_INVITATION_RECIEVED: 'WS_INVITATION_RECIEVED',
  WS_INVITATION_ACCEPTED: 'WS_INVITATION_ACCEPTED',
  WS_INVITATION_DECLINE: 'WS_INVITATION_DECLINE'
};

const initState = {
  loading: false,
  invitations: [],
  error: null,
  message: 'Lest chat on Webcom'
};
function invitationReducer(state, action) {
  switch (action.type) {
    case actionTypes.SEND_INVITATION_STARTED:
      return { ...state,
        loading: true
      };

    case actionTypes.SEND_INVITATION_SUCCESS:
      return { ...state,
        loading: false,
        invitations: [...state.invitations, action.invitation]
      };

    case actionTypes.SEND_INVITATION_FAILED:
      return { ...state,
        loading: false,
        error: action.error
      };

    case actionTypes.VALUE_CHANGED:
      return { ...state,
        message: action.value
      };

    default:
      return state;
  }
}

async function sendInvitation({
  dispatch,
  message,
  token,
  target
}) {
  try {
    dispatch({
      type: actionTypes.SEND_INVITATION_STARTED
    });
    const response = await fetch('/invitation/insertOne', {
      headers: {
        'Conten-Type': 'application/json',
        'Access-Control-Allow-Headers': '*',
        Authorization: `Bearer ${btoa(`${token}`)}`
      },
      method: 'post',
      body: JSON.stringify({
        target,
        message
      })
    });
    const {
      invation
    } = await response.json();
    dispatch({
      type: actionTypes.SEND_INVITATION_SUCCESS,
      invation
    });
  } catch (error) {
    dispatch({
      type: actionTypes.SEND_INVITATION_FAILED,
      error
    });
  }
}
function valueChanged({
  dispatch,
  value
}) {
  dispatch({
    type: actionTypes.VALUE_CHANGED,
    value
  });
} ///

function PersonAddIcon({
  height = 24,
  width = 24
}) {
  return h("svg", {
    height: height,
    viewBox: "0 0 24 24",
    width: width
  }, h("path", {
    d: "M0 0h24v24H0z",
    fill: "none"
  }), h("path", {
    d: "M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
  }));
}

function Invitation({
  invitation
}) {
  const {
    state: authState
  } = useAuthContext();
  const [state, dispatch] = m(invitationReducer, initState);
  const {
    message
  } = state;

  function handleChange(e) {
    valueChanged({
      dispatch,
      value: e.target.value
    });
  }

  function handleSendInvitation() {
    const {
      token
    } = authState;
    const {
      username
    } = invitation;
    sendInvitation({
      dispatch,
      message,
      token,
      target: username
    });
  }

  return h("div", {
    "data-testid": "invitation"
  }, ' ', h(PersonAddIcon, {
    height: 50,
    width: 50
  }), h("p", null, "Start conversation with ", h("i", null, invitation.email), ' '), h("textarea", {
    rows: "3",
    cols: "50",
    onChange: handleChange,
    value: message
  }), h(Button, {
    id: "send-invitation-btn",
    title: "Send Invite",
    onClick: handleSendInvitation
  }), ' ');
}

function PeerToPeerInvitationMobile({
  invitation
}) {
  return h("div", {
    "data-testid": "p2p-invitation-mobile"
  }, h(Invitation, {
    invitation: invitation
  }));
}

function Messaging() {
  return h("div", null, "Messaging");
}

const Contacts = L(() => import('./Contacts-2b50954b.js'));
const PeerToPeerChat = L(() => import('./p2p-chat-mobile-dc5b6a61.js'));
function PeerToPeerMobile() {
  const [state, dispatch] = useContactsContext();
  const [route, setRoute] = useRouteContext();
  const {
    contact
  } = state;
  const {
    width
  } = useMediaQuery();
  p(() => {
    if (width < 800) {
      setRoute('/contacts');
    }
  }, []);
  return h(PeerToPeerMobileContext, null, h(Route, {
    path: "/contacts"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Contacts, null))), h(Route, {
    path: "/invitation"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(PeerToPeerInvitationMobile, {
    invitation: contact
  }))), h(Route, {
    path: "/messaging"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(Messaging, null))), h(Route, {
    path: "/p2p-chat"
  }, h(U, {
    fallback: h("div", null, "loading...")
  }, h(PeerToPeerChat, {
    chat: contact
  }))));
}

export default PeerToPeerMobile;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicDJwLW1vYmlsZS03OGY2MGZkYy5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vY2xpZW50L3AycC9tb2JpbGUvcDJwLW1vYmlsZS1jb250ZXh0LmpzIiwiLi4vLi4vLi4vY2xpZW50L2ludml0YXRpb24vYWN0aW9uVHlwZXMuanMiLCIuLi8uLi8uLi9jbGllbnQvaW52aXRhdGlvbi9pbnZpdGF0aW9uUmVkdWNlci5qcyIsIi4uLy4uLy4uL2NsaWVudC9pbnZpdGF0aW9uL2FjdGlvbnMuanMiLCIuLi8uLi8uLi9jbGllbnQvbGF5b3V0L2ljb25zL1BlcnNvbkFkZC5qcyIsIi4uLy4uLy4uL2NsaWVudC9pbnZpdGF0aW9uL0ludml0YXRpb24uanMiLCIuLi8uLi8uLi9jbGllbnQvcDJwL21vYmlsZS9wMnAtaW52aXRhdGlvbi1tb2JpbGUuanMiLCIuLi8uLi8uLi9jbGllbnQvbWVzc2FnaW5nL01lc3NhZ2luZy5qcyIsIi4uLy4uLy4uL2NsaWVudC9wMnAvbW9iaWxlL3AycC1tb2JpbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7XHJcbiAgdXNlQ29udGFjdHNDb250ZXh0XHJcbn0gZnJvbSAnLi4vLi4vY29udGFjdHMvY29udGFjdC1jb250ZXh0JztcclxuaW1wb3J0IHsgdXNlTWVkaWFRdWVyeSB9IGZyb20gJy4uLy4uL2xheW91dC91c2VNZWRpYVF1ZXJ5JztcclxuaW1wb3J0IHsgdXNlUm91dGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vcm91dGUvcm91dGVyJztcclxuZXhwb3J0IGZ1bmN0aW9uIFBlZXJUb1BlZXJNb2JpbGVDb250ZXh0KHsgY2hpbGRyZW4gfSkge1xyXG5cclxuICBjb25zdCBbc3RhdGUsIGRpc3BhdGNoXSA9IHVzZUNvbnRhY3RzQ29udGV4dCgpO1xyXG4gIGNvbnN0IFtyb3V0ZSwgc2V0Um91dGVdID0gdXNlUm91dGVDb250ZXh0KCk7XHJcbiAgY29uc3QgeyB3aWR0aCB9ID0gdXNlTWVkaWFRdWVyeSgpO1xyXG4gIGNvbnN0IHsgY29udGFjdCB9ID0gc3RhdGU7XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICh3aWR0aCA8IDgwMCkge1xyXG4gICAgICBpZiAoY29udGFjdCAmJiBjb250YWN0LnJvb20pIHtcclxuICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICBzZXRSb3V0ZSgnL3AycC1jaGF0Jyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoY29udGFjdCAmJiAhY29udGFjdC5yb29tKSB7XHJcbiAgICAgICAgc2V0Um91dGUoJy9pbnZpdGF0aW9uJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0Um91dGUoJy9jb250YWN0cycpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW2NvbnRhY3RdKTtcclxuXHJcblxyXG5cclxuICByZXR1cm4gY2hpbGRyZW47XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gIFNFTkRfSU5WSVRBVElPTl9TVEFSVEVEOiAnU0VORF9JTlZJVEFUSU9OX1NUQVJURUQnLFxyXG4gIFNFTkRfSU5WSVRBVElPTl9TVUNDRVNTOiAnU0VORF9JTlZJVEFUSU9OX1NVQ0NFU1MnLFxyXG4gIFNFTkRfSU5WSVRBVElPTl9GQUlMRUQ6ICdTRU5EX0lOVklUQVRJT05fRkFJTEVEJyxcclxuICBWQUxVRV9DSEFOR0VEOiAnVkFMVUVfQ0hBTkdFRCcsXHJcblxyXG4gIFdTX0lOVklUQVRJT05fSU5JVElBVEVEOiAnV1NfSU5WSVRBVElPTl9JTklUSUFURUQnLFxyXG4gIFdTX0lOVklUQVRJT05fREVMSVZFUkVEOiAnV1NfSU5WSVRBVElPTl9ERUxJVkVSRUQnLFxyXG4gIFdTX0lOVklUQVRJT05fUkVDSUVWRUQ6ICdXU19JTlZJVEFUSU9OX1JFQ0lFVkVEJyxcclxuICBXU19JTlZJVEFUSU9OX0FDQ0VQVEVEOiAnV1NfSU5WSVRBVElPTl9BQ0NFUFRFRCcsXHJcbiAgV1NfSU5WSVRBVElPTl9ERUNMSU5FOiAnV1NfSU5WSVRBVElPTl9ERUNMSU5FJyxcclxufTtcclxuIiwiaW1wb3J0IGFjdGlvblR5cGVzIGZyb20gJy4vYWN0aW9uVHlwZXMnO1xyXG5leHBvcnQgY29uc3QgaW5pdFN0YXRlID0ge1xyXG4gIGxvYWRpbmc6IGZhbHNlLFxyXG4gIGludml0YXRpb25zOiBbXSxcclxuICBlcnJvcjogbnVsbCxcclxuICBtZXNzYWdlOiAnTGVzdCBjaGF0IG9uIFdlYmNvbScsXHJcbn07XHJcbmV4cG9ydCBmdW5jdGlvbiBpbnZpdGF0aW9uUmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7XHJcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xyXG4gICAgY2FzZSBhY3Rpb25UeXBlcy5TRU5EX0lOVklUQVRJT05fU1RBUlRFRDpcclxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGxvYWRpbmc6IHRydWUgfTtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuU0VORF9JTlZJVEFUSU9OX1NVQ0NFU1M6XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uc3RhdGUsXHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgaW52aXRhdGlvbnM6IFsuLi5zdGF0ZS5pbnZpdGF0aW9ucywgYWN0aW9uLmludml0YXRpb25dLFxyXG4gICAgICB9O1xyXG4gICAgY2FzZSBhY3Rpb25UeXBlcy5TRU5EX0lOVklUQVRJT05fRkFJTEVEOlxyXG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbG9hZGluZzogZmFsc2UsIGVycm9yOiBhY3Rpb24uZXJyb3IgfTtcclxuICAgIGNhc2UgYWN0aW9uVHlwZXMuVkFMVUVfQ0hBTkdFRDpcclxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIG1lc3NhZ2U6IGFjdGlvbi52YWx1ZSB9O1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgYWN0aW9uVHlwZXMgZnJvbSAnLi9hY3Rpb25UeXBlcyc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZEludml0YXRpb24oeyBkaXNwYXRjaCwgbWVzc2FnZSwgdG9rZW4sIHRhcmdldCB9KSB7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLlNFTkRfSU5WSVRBVElPTl9TVEFSVEVEIH0pO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2ludml0YXRpb24vaW5zZXJ0T25lJywge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbi1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJyonLFxyXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtidG9hKGAke3Rva2VufWApfWAsXHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRhcmdldCwgbWVzc2FnZSB9KSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgeyBpbnZhdGlvbiB9ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGRpc3BhdGNoKHsgdHlwZTogYWN0aW9uVHlwZXMuU0VORF9JTlZJVEFUSU9OX1NVQ0NFU1MsIGludmF0aW9uIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gXHJcbiAgICBkaXNwYXRjaCh7IHR5cGU6IGFjdGlvblR5cGVzLlNFTkRfSU5WSVRBVElPTl9GQUlMRUQsIGVycm9yIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbHVlQ2hhbmdlZCh7IGRpc3BhdGNoLCB2YWx1ZSB9KSB7XHJcbiAgZGlzcGF0Y2goeyB0eXBlOiBhY3Rpb25UeXBlcy5WQUxVRV9DSEFOR0VELCB2YWx1ZSB9KTtcclxufVxyXG4vLy9cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBlcnNvbkFkZEljb24oeyBoZWlnaHQgPSAyNCwgd2lkdGggPSAyNCB9KSB7XHJcbiAgcmV0dXJuIChcclxuICAgIDxzdmcgaGVpZ2h0PXtoZWlnaHR9IHZpZXdCb3g9JzAgMCAyNCAyNCcgd2lkdGg9e3dpZHRofT5cclxuICAgICAgPHBhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScgLz5cclxuICAgICAgPHBhdGggZD0nTTE1IDEyYzIuMjEgMCA0LTEuNzkgNC00cy0xLjc5LTQtNC00LTQgMS43OS00IDQgMS43OSA0IDQgNHptLTktMlY3SDR2M0gxdjJoM3YzaDJ2LTNoM3YtMkg2em05IDRjLTIuNjcgMC04IDEuMzQtOCA0djJoMTZ2LTJjMC0yLjY2LTUuMzMtNC04LTR6JyAvPlxyXG4gICAgPC9zdmc+XHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcclxuaW1wb3J0IHsgdXNlUmVkdWNlciB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7IGludml0YXRpb25SZWR1Y2VyLCBpbml0U3RhdGUgfSBmcm9tICcuL2ludml0YXRpb25SZWR1Y2VyJztcclxuaW1wb3J0IHsgc2VuZEludml0YXRpb24sIHZhbHVlQ2hhbmdlZCB9IGZyb20gJy4vYWN0aW9ucyc7XHJcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vZm9ybS9CdXR0b24nO1xyXG5pbXBvcnQgUGVyc29uQWRkSWNvbiBmcm9tICcuLi9sYXlvdXQvaWNvbnMvUGVyc29uQWRkJztcclxuaW1wb3J0IHsgdXNlQXV0aENvbnRleHQgfSBmcm9tICcuLi9hdXRoL2F1dGgtY29udGV4dCc7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEludml0YXRpb24oeyBpbnZpdGF0aW9uIH0pIHtcclxuICBjb25zdCB7IHN0YXRlOiBhdXRoU3RhdGUgfSA9IHVzZUF1dGhDb250ZXh0KCk7XHJcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKGludml0YXRpb25SZWR1Y2VyLCBpbml0U3RhdGUpO1xyXG4gIGNvbnN0IHsgbWVzc2FnZSB9ID0gc3RhdGU7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShlKSB7XHJcbiAgICB2YWx1ZUNoYW5nZWQoeyBkaXNwYXRjaCwgdmFsdWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlU2VuZEludml0YXRpb24oKSB7XHJcbiAgICBjb25zdCB7IHRva2VuIH0gPSBhdXRoU3RhdGU7XHJcbiAgICBjb25zdCB7IHVzZXJuYW1lIH0gPSBpbnZpdGF0aW9uO1xyXG4gIFxyXG4gICAgc2VuZEludml0YXRpb24oeyBkaXNwYXRjaCwgbWVzc2FnZSwgdG9rZW4sIHRhcmdldDogdXNlcm5hbWUgfSk7XHJcbiAgfVxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPSdpbnZpdGF0aW9uJz5cclxuICAgICAgeycgJ31cclxuICAgICAgPFBlcnNvbkFkZEljb24gaGVpZ2h0PXs1MH0gd2lkdGg9ezUwfSAvPlxyXG4gICAgICA8cD5cclxuICAgICAgICBTdGFydCBjb252ZXJzYXRpb24gd2l0aCA8aT57aW52aXRhdGlvbi5lbWFpbH08L2k+eycgJ31cclxuICAgICAgPC9wPlxyXG4gICAgICA8dGV4dGFyZWEgcm93cz0nMycgY29scz0nNTAnIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IHZhbHVlPXttZXNzYWdlfSAvPlxyXG4gICAgICA8QnV0dG9uIGlkPVwic2VuZC1pbnZpdGF0aW9uLWJ0blwiIHRpdGxlPSdTZW5kIEludml0ZScgb25DbGljaz17aGFuZGxlU2VuZEludml0YXRpb259IC8+eycgJ31cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCBJbnZpdGF0aW9uIGZyb20gJy4uLy4uL2ludml0YXRpb24vSW52aXRhdGlvbic7XHJcbmV4cG9ydCBmdW5jdGlvbiBQZWVyVG9QZWVySW52aXRhdGlvbk1vYmlsZSh7IGludml0YXRpb24gfSkge1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPSdwMnAtaW52aXRhdGlvbi1tb2JpbGUnPlxyXG4gICAgICA8SW52aXRhdGlvbiBpbnZpdGF0aW9uPXtpbnZpdGF0aW9ufSAvPlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAncHJlYWN0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lc3NhZ2luZygpIHtcclxuICByZXR1cm4gPGRpdj5NZXNzYWdpbmc8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0IHsgaCB9IGZyb20gJ3ByZWFjdCc7XHJcbmltcG9ydCB7IFN1c3BlbnNlLCBsYXp5IH0gZnJvbSAncHJlYWN0L2NvbXBhdCc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3ByZWFjdC9ob29rcyc7XHJcbmltcG9ydCB7IHVzZVJvdXRlQ29udGV4dCB9IGZyb20gJy4uLy4uL3JvdXRlL3JvdXRlcic7XHJcbmltcG9ydCB7IHVzZU1lZGlhUXVlcnkgfSBmcm9tICcuLi8uLi9sYXlvdXQvdXNlTWVkaWFRdWVyeSc7XHJcbmltcG9ydCB7IFJvdXRlIH0gZnJvbSAnLi4vLi4vcm91dGUvcm91dGVyJztcclxuaW1wb3J0IHsgUGVlclRvUGVlck1vYmlsZUNvbnRleHQgfSBmcm9tICcuL3AycC1tb2JpbGUtY29udGV4dCc7XHJcbmltcG9ydCB7IFBlZXJUb1BlZXJJbnZpdGF0aW9uTW9iaWxlIH0gZnJvbSAnLi9wMnAtaW52aXRhdGlvbi1tb2JpbGUnO1xyXG5pbXBvcnQgTWVzc2FnaW5nIGZyb20gJy4uLy4uL21lc3NhZ2luZy9NZXNzYWdpbmcnO1xyXG5pbXBvcnQgeyB1c2VDb250YWN0c0NvbnRleHQgfSBmcm9tICcuLi8uLi9jb250YWN0cy9jb250YWN0LWNvbnRleHQnO1xyXG5jb25zdCBDb250YWN0cyA9IGxhenkoKCkgPT4gaW1wb3J0KCcuLi8uLi9jb250YWN0cy9Db250YWN0cycpKTtcclxuY29uc3QgUGVlclRvUGVlckNoYXQgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9wMnAtY2hhdC1tb2JpbGUnKSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQZWVyVG9QZWVyTW9iaWxlKCkge1xyXG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlQ29udGFjdHNDb250ZXh0KCk7XHJcbiAgY29uc3QgW3JvdXRlLCBzZXRSb3V0ZV0gPSB1c2VSb3V0ZUNvbnRleHQoKTtcclxuICBjb25zdCB7IGNvbnRhY3QgfSA9IHN0YXRlO1xyXG4gIGNvbnN0IHsgd2lkdGggfSA9IHVzZU1lZGlhUXVlcnkoKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICh3aWR0aCA8IDgwMCkge1xyXG4gICAgICBzZXRSb3V0ZSgnL2NvbnRhY3RzJyk7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFBlZXJUb1BlZXJNb2JpbGVDb250ZXh0PlxyXG4gICAgICA8Um91dGUgcGF0aD0nL2NvbnRhY3RzJz5cclxuICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXY+bG9hZGluZy4uLjwvZGl2Pn0+XHJcbiAgICAgICAgICA8Q29udGFjdHMgLz5cclxuICAgICAgICA8L1N1c3BlbnNlPlxyXG4gICAgICA8L1JvdXRlPlxyXG5cclxuICAgICAgPFJvdXRlIHBhdGg9Jy9pbnZpdGF0aW9uJz5cclxuICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXY+bG9hZGluZy4uLjwvZGl2Pn0+XHJcbiAgICAgICAgICA8UGVlclRvUGVlckludml0YXRpb25Nb2JpbGUgaW52aXRhdGlvbj17Y29udGFjdH0gLz5cclxuICAgICAgICA8L1N1c3BlbnNlPlxyXG4gICAgICA8L1JvdXRlPlxyXG4gICAgICA8Um91dGUgcGF0aD0nL21lc3NhZ2luZyc+XHJcbiAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmxvYWRpbmcuLi48L2Rpdj59PlxyXG4gICAgICAgICAgPE1lc3NhZ2luZyAvPlxyXG4gICAgICAgIDwvU3VzcGVuc2U+XHJcbiAgICAgIDwvUm91dGU+XHJcbiAgICAgIDxSb3V0ZSBwYXRoPScvcDJwLWNoYXQnPlxyXG4gICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5sb2FkaW5nLi4uPC9kaXY+fT5cclxuICAgICAgICAgIDxQZWVyVG9QZWVyQ2hhdCBjaGF0PXtjb250YWN0fSAvPlxyXG4gICAgICAgIDwvU3VzcGVuc2U+XHJcbiAgICAgIDwvUm91dGU+XHJcbiAgICA8L1BlZXJUb1BlZXJNb2JpbGVDb250ZXh0PlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBlZXJUb1BlZXJNb2JpbGVDb250ZXh0IiwiY2hpbGRyZW4iLCJzdGF0ZSIsImRpc3BhdGNoIiwidXNlQ29udGFjdHNDb250ZXh0Iiwicm91dGUiLCJzZXRSb3V0ZSIsInVzZVJvdXRlQ29udGV4dCIsIndpZHRoIiwidXNlTWVkaWFRdWVyeSIsImNvbnRhY3QiLCJ1c2VFZmZlY3QiLCJyb29tIiwiU0VORF9JTlZJVEFUSU9OX1NUQVJURUQiLCJTRU5EX0lOVklUQVRJT05fU1VDQ0VTUyIsIlNFTkRfSU5WSVRBVElPTl9GQUlMRUQiLCJWQUxVRV9DSEFOR0VEIiwiV1NfSU5WSVRBVElPTl9JTklUSUFURUQiLCJXU19JTlZJVEFUSU9OX0RFTElWRVJFRCIsIldTX0lOVklUQVRJT05fUkVDSUVWRUQiLCJXU19JTlZJVEFUSU9OX0FDQ0VQVEVEIiwiV1NfSU5WSVRBVElPTl9ERUNMSU5FIiwiaW5pdFN0YXRlIiwibG9hZGluZyIsImludml0YXRpb25zIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW52aXRhdGlvblJlZHVjZXIiLCJhY3Rpb24iLCJ0eXBlIiwiYWN0aW9uVHlwZXMiLCJpbnZpdGF0aW9uIiwidmFsdWUiLCJzZW5kSW52aXRhdGlvbiIsInRva2VuIiwidGFyZ2V0IiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYnRvYSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaW52YXRpb24iLCJqc29uIiwidmFsdWVDaGFuZ2VkIiwiUGVyc29uQWRkSWNvbiIsImhlaWdodCIsIkludml0YXRpb24iLCJhdXRoU3RhdGUiLCJ1c2VBdXRoQ29udGV4dCIsInVzZVJlZHVjZXIiLCJoYW5kbGVDaGFuZ2UiLCJlIiwiaGFuZGxlU2VuZEludml0YXRpb24iLCJ1c2VybmFtZSIsImVtYWlsIiwiUGVlclRvUGVlckludml0YXRpb25Nb2JpbGUiLCJNZXNzYWdpbmciLCJDb250YWN0cyIsImxhenkiLCJQZWVyVG9QZWVyQ2hhdCIsIlBlZXJUb1BlZXJNb2JpbGUiLCJTdXNwZW5zZSJdLCJtYXBwaW5ncyI6Ijs7O0FBT08sU0FBU0EsdUJBQVQsQ0FBaUM7QUFBRUMsRUFBQUE7QUFBRixDQUFqQyxFQUErQztBQUVwRCxRQUFNLENBQUNDLEtBQUQsRUFBUUMsUUFBUixJQUFvQkMsa0JBQWtCLEVBQTVDO0FBQ0EsUUFBTSxDQUFDQyxLQUFELEVBQVFDLFFBQVIsSUFBb0JDLGVBQWUsRUFBekM7QUFDQSxRQUFNO0FBQUVDLElBQUFBO0FBQUYsTUFBWUMsYUFBYSxFQUEvQjtBQUNBLFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFjUixLQUFwQjtBQUNBUyxFQUFBQSxDQUFTLENBQUMsTUFBTTtBQUNkLFFBQUlILEtBQUssR0FBRyxHQUFaLEVBQWlCO0FBQ2YsVUFBSUUsT0FBTyxJQUFJQSxPQUFPLENBQUNFLElBQXZCLEVBQTZCO0FBQzNCO0FBQ0FOLFFBQUFBLFFBQVEsQ0FBQyxXQUFELENBQVI7QUFDRCxPQUhELE1BR08sSUFBSUksT0FBTyxJQUFJLENBQUNBLE9BQU8sQ0FBQ0UsSUFBeEIsRUFBOEI7QUFDbkNOLFFBQUFBLFFBQVEsQ0FBQyxhQUFELENBQVI7QUFDRCxPQUZNLE1BRUE7QUFDTEEsUUFBQUEs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
